(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,87331,(e,t,i)=>{t.exports=function(e){return null!==e&&"object"==typeof e&&"function"==typeof e.addUndirectedEdgeWithKey&&"function"==typeof e.dropNode&&"boolean"==typeof e.multi}},38876,(e,t,i)=>{t.exports=function e(t,i){t=t||{};var n={};for(var r in i){var a=t[r],o=i[r];if(!(!o||"object"!=typeof o||"function"==typeof o||Array.isArray(o)||o instanceof Set||o instanceof Map||o instanceof RegExp||o instanceof Date)){n[r]=e(a,o);continue}void 0===a?n[r]=o:n[r]=a}return n}},59351,(e,t,i)=>{function n(e){return"number"!=typeof e||isNaN(e)?1:e}function r(e,t){var i={},n=function(e){return void 0===e?t:e};"function"==typeof t&&(n=t);var r=function(t){return n(t[e])},a=function(){return n(void 0)};return"string"==typeof e?(i.fromAttributes=r,i.fromGraph=function(e,t){return r(e.getEdgeAttributes(t))},i.fromEntry=function(e,t){return r(t)},i.fromPartialEntry=i.fromEntry,i.fromMinimalEntry=i.fromEntry):"function"==typeof e?(i.fromAttributes=function(){throw Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},i.fromGraph=function(t,i){var r=t.extremities(i);return n(e(i,t.getEdgeAttributes(i),r[0],r[1],t.getNodeAttributes(r[0]),t.getNodeAttributes(r[1]),t.isUndirected(i)))},i.fromEntry=function(t,i,r,a,o,s,h){return n(e(t,i,r,a,o,s,h))},i.fromPartialEntry=function(t,i,r,a){return n(e(t,i,r,a))},i.fromMinimalEntry=function(t,i){return n(e(t,i))}):(i.fromAttributes=a,i.fromGraph=a,i.fromEntry=a,i.fromMinimalEntry=a),i}i.createNodeValueGetter=function(e,t){var i={},n=function(e){return void 0===e?t:e};"function"==typeof t&&(n=t);var r=function(t){return n(t[e])},a=function(){return n(void 0)};return"string"==typeof e?(i.fromAttributes=r,i.fromGraph=function(e,t){return r(e.getNodeAttributes(t))},i.fromEntry=function(e,t){return r(t)}):"function"==typeof e?(i.fromAttributes=function(){throw Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},i.fromGraph=function(t,i){return n(e(i,t.getNodeAttributes(i)))},i.fromEntry=function(t,i){return n(e(t,i))}):(i.fromAttributes=a,i.fromGraph=a,i.fromEntry=a),i},i.createEdgeValueGetter=r,i.createEdgeWeightGetter=function(e){return r(e,n)}},96466,(e,t,i)=>{let{createNodeValueGetter:n,createEdgeValueGetter:r}=e.r(59351);t.exports=function(e,t,i){let{nodeXAttribute:a,nodeYAttribute:o}=i,{attraction:s,repulsion:h,gravity:l,inertia:d,maxMove:u}=i.settings,{shouldSkipNode:c,shouldSkipEdge:g,isNodeFixed:f}=i;f=n(f),c=n(c,!1),g=r(g,!1);let m=e.filterNodes((e,t)=>!c.fromEntry(e,t)),v=m.length;for(let i=0;i<v;i++){let n=m[i],r=e.getNodeAttributes(n),s=t[n];s?t[n]={dx:s.dx*d,dy:s.dy*d,x:r[a]||0,y:r[o]||0}:t[n]={dx:0,dy:0,x:r[a]||0,y:r[o]||0}}if(h)for(let e=0;e<v;e++){let i=t[m[e]];for(let n=e+1;n<v;n++){let e=t[m[n]],r=e.x-i.x,a=e.y-i.y,o=Math.sqrt(r*r+a*a)||1,s=h/o*r,l=h/o*a;i.dx-=s,i.dy-=l,e.dx+=s,e.dy+=l}}if(s&&e.forEachEdge((e,i,n,r,a,o,h)=>{if(n===r||c.fromEntry(n,a)||c.fromEntry(r,o)||g.fromEntry(e,i,n,r,a,o,h))return;let l=t[n],d=t[r],u=d.x-l.x,f=d.y-l.y,m=Math.sqrt(u*u+f*f)||1,v=s*m*u,p=s*m*f;l.dx+=v,l.dy+=p,d.dx-=v,d.dy-=p}),l)for(let e=0;e<v;e++){let i=m[e],{x:n,y:r}=t[i],a=Math.sqrt(n*n+r*r)||1;t[i].dx-=n*l*a,t[i].dy-=r*l*a}for(let i=0;i<v;i++){let n=m[i],r=t[n],a=Math.sqrt(r.dx*r.dx+r.dy*r.dy);a>u&&(r.dx*=u/a,r.dy*=u/a),f.fromGraph(e,n)?r.fixed=!0:(r.x+=r.dx,r.y+=r.dy,r.fixed=!1)}return{converged:!1}}},42201,(e,t,i)=>{i.assignLayoutChanges=function(e,t,i){let{nodeXAttribute:n,nodeYAttribute:r}=i;e.updateEachNodeAttributes((e,i)=>{let a=t[e];return!a||a.fixed||(i[n]=a.x,i[r]=a.y),i},{attributes:["x","y"]})},i.collectLayoutChanges=function(e){let t={};for(let i in e){let n=e[i];t[i]={x:n.x,y:n.y}}return t}},53094,(e,t,i)=>{t.exports={nodeXAttribute:"x",nodeYAttribute:"y",isNodeFixed:"fixed",shouldSkipNode:null,shouldSkipEdge:null,settings:{attraction:5e-4,repulsion:.1,gravity:1e-4,inertia:.6,maxMove:200}}},64932,(e,t,i)=>{let n=e.r(87331),r=e.r(38876),a=e.r(96466),o=e.r(42201),s=e.r(53094);function h(e,t,i){let h;if(!n(t))throw Error("graphology-layout-force: the given graph is not a valid graphology instance.");let l=(i="number"==typeof i?{maxIterations:i}:i||{}).maxIterations;if(i=r(i,s),"number"!=typeof l||l<=0)throw Error("graphology-layout-force: you should provide a positive number of maximum iterations.");let d={};for(h=0;h<l&&!a(t,d,i).converged;h++);return e?void o.assignLayoutChanges(t,d,i):o.collectLayoutChanges(d)}let l=h.bind(null,!1);l.assign=h.bind(null,!0),t.exports=l},42114,(e,t,i)=>{let n=e.r(87331),r=e.r(38876),a=e.r(96466),o=e.r(42201),s=e.r(53094);function h(e,t){if(!n(e))throw Error("graphology-layout-force/worker: the given graph is not a valid graphology instance.");t=r(t,s),this.callbacks={},t.onConverged&&(this.callbacks.onConverged=t.onConverged),this.graph=e,this.params=t,this.nodeStates={},this.frameID=null,this.running=!1,this.killed=!1}h.prototype.isRunning=function(){return this.running},h.prototype.runFrame=function(){let{converged:e}=a(this.graph,this.nodeStates,this.params);o.assignLayoutChanges(this.graph,this.nodeStates,this.params),this.frameID=window.requestAnimationFrame(()=>this.runFrame())},h.prototype.stop=function(){return this.running=!1,null!==this.frameID&&(window.cancelAnimationFrame(this.frameID),this.frameID=null),this},h.prototype.start=function(){if(this.killed)throw Error("graphology-layout-force/worker.start: layout was killed.");this.running||(this.running=!0,this.runFrame())},h.prototype.kill=function(){this.stop(),delete this.nodeStates,this.killed=!0},t.exports=h},52171,(e,t,i)=>{t.exports=function(e,t,i){var n,r,a,o,s,h,l=t.length,d=i.length,u=e.adjustSizes,c=e.barnesHutTheta*e.barnesHutTheta,g=[];for(v=0;v<l;v+=10)t[v+4]=t[v+2],t[v+5]=t[v+3],t[v+2]=0,t[v+3]=0;if(e.outboundAttractionDistribution){for(v=0,k=0;v<l;v+=10)k+=t[v+6];k/=l/10}if(e.barnesHutOptimize){var f,m,v,p,y,b,E,x,w,T,k,C,R,S,A,L,_,F,N,D,M=1/0,P=-1/0,G=1/0,I=-1/0;for(v=0;v<l;v+=10)M=Math.min(M,t[v+0]),P=Math.max(P,t[v+0]),G=Math.min(G,t[v+1]),I=Math.max(I,t[v+1]);var z=P-M,O=I-G;for(z>O?(G-=(z-O)/2,I=G+z):(M-=(O-z)/2,P=M+O),g[0]=-1,g[1]=(M+P)/2,g[2]=(G+I)/2,g[3]=Math.max(P-M,I-G),g[4]=-1,g[5]=-1,g[6]=0,g[7]=0,g[8]=0,f=1,v=0;v<l;v+=10)for(m=0,D=3;;)if(g[m+5]>=0){F=t[v+0]<g[m+1]?t[v+1]<g[m+2]?g[m+5]:g[m+5]+9:t[v+1]<g[m+2]?g[m+5]+18:g[m+5]+27,g[m+7]=(g[m+7]*g[m+6]+t[v+0]*t[v+6])/(g[m+6]+t[v+6]),g[m+8]=(g[m+8]*g[m+6]+t[v+1]*t[v+6])/(g[m+6]+t[v+6]),g[m+6]+=t[v+6],m=F;continue}else if(g[m+0]<0){g[m+0]=v;break}else{if(g[m+5]=9*f,x=g[m+3]/2,w=g[m+5],g[w+0]=-1,g[w+1]=g[m+1]-x,g[w+2]=g[m+2]-x,g[w+3]=x,g[w+4]=w+9,g[w+5]=-1,g[w+6]=0,g[w+7]=0,g[w+8]=0,g[(w+=9)+0]=-1,g[w+1]=g[m+1]-x,g[w+2]=g[m+2]+x,g[w+3]=x,g[w+4]=w+9,g[w+5]=-1,g[w+6]=0,g[w+7]=0,g[w+8]=0,g[(w+=9)+0]=-1,g[w+1]=g[m+1]+x,g[w+2]=g[m+2]-x,g[w+3]=x,g[w+4]=w+9,g[w+5]=-1,g[w+6]=0,g[w+7]=0,g[w+8]=0,g[(w+=9)+0]=-1,g[w+1]=g[m+1]+x,g[w+2]=g[m+2]+x,g[w+3]=x,g[w+4]=g[m+4],g[w+5]=-1,g[w+6]=0,g[w+7]=0,g[w+8]=0,f+=4,F=t[g[m+0]+0]<g[m+1]?t[g[m+0]+1]<g[m+2]?g[m+5]:g[m+5]+9:t[g[m+0]+1]<g[m+2]?g[m+5]+18:g[m+5]+27,g[m+6]=t[g[m+0]+6],g[m+7]=t[g[m+0]+0],g[m+8]=t[g[m+0]+1],g[F+0]=g[m+0],g[m+0]=-1,F===(N=t[v+0]<g[m+1]?t[v+1]<g[m+2]?g[m+5]:g[m+5]+9:t[v+1]<g[m+2]?g[m+5]+18:g[m+5]+27))if(D--){m=F;continue}else{D=3;break}g[N+0]=v;break}}if(e.barnesHutOptimize)for(v=0,C=e.scalingRatio;v<l;v+=10)for(m=0;;)if(g[m+5]>=0){if(L=Math.pow(t[v+0]-g[m+7],2)+Math.pow(t[v+1]-g[m+8],2),4*(T=g[m+3])*T/L<c){if(R=t[v+0]-g[m+7],S=t[v+1]-g[m+8],!0===u?L>0?(_=C*t[v+6]*g[m+6]/L,t[v+2]+=R*_,t[v+3]+=S*_):L<0&&(_=-C*t[v+6]*g[m+6]/Math.sqrt(L),t[v+2]+=R*_,t[v+3]+=S*_):L>0&&(_=C*t[v+6]*g[m+6]/L,t[v+2]+=R*_,t[v+3]+=S*_),(m=g[m+4])<0)break;continue}m=g[m+5];continue}else{if((b=g[m+0])>=0&&b!==v&&(L=(R=t[v+0]-t[b+0])*R+(S=t[v+1]-t[b+1])*S,!0===u?L>0?(_=C*t[v+6]*t[b+6]/L,t[v+2]+=R*_,t[v+3]+=S*_):L<0&&(_=-C*t[v+6]*t[b+6]/Math.sqrt(L),t[v+2]+=R*_,t[v+3]+=S*_):L>0&&(_=C*t[v+6]*t[b+6]/L,t[v+2]+=R*_,t[v+3]+=S*_)),(m=g[m+4])<0)break;continue}else for(p=0,C=e.scalingRatio;p<l;p+=10)for(y=0;y<p;y+=10)R=t[p+0]-t[y+0],S=t[p+1]-t[y+1],!0===u?(L=Math.sqrt(R*R+S*S)-t[p+8]-t[y+8])>0?(_=C*t[p+6]*t[y+6]/L/L,t[p+2]+=R*_,t[p+3]+=S*_,t[y+2]-=R*_,t[y+3]-=S*_):L<0&&(_=100*C*t[p+6]*t[y+6],t[p+2]+=R*_,t[p+3]+=S*_,t[y+2]-=R*_,t[y+3]-=S*_):(L=Math.sqrt(R*R+S*S))>0&&(_=C*t[p+6]*t[y+6]/L/L,t[p+2]+=R*_,t[p+3]+=S*_,t[y+2]-=R*_,t[y+3]-=S*_);for(v=0,w=e.gravity/e.scalingRatio,C=e.scalingRatio;v<l;v+=10)_=0,L=Math.sqrt(Math.pow(R=t[v+0],2)+Math.pow(S=t[v+1],2)),e.strongGravityMode?L>0&&(_=C*t[v+6]*w):L>0&&(_=C*t[v+6]*w/L),t[v+2]-=R*_,t[v+3]-=S*_;for(E=0,C=+(e.outboundAttractionDistribution?k:1);E<d;E+=3)p=i[E+0],y=i[E+1],A=Math.pow(x=i[E+2],e.edgeWeightInfluence),R=t[p+0]-t[y+0],S=t[p+1]-t[y+1],!0===u?(L=Math.sqrt(R*R+S*S)-t[p+8]-t[y+8],e.linLogMode?e.outboundAttractionDistribution?L>0&&(_=-C*A*Math.log(1+L)/L/t[p+6]):L>0&&(_=-C*A*Math.log(1+L)/L):e.outboundAttractionDistribution?L>0&&(_=-C*A/t[p+6]):L>0&&(_=-C*A)):(L=Math.sqrt(Math.pow(R,2)+Math.pow(S,2)),e.linLogMode?e.outboundAttractionDistribution?L>0&&(_=-C*A*Math.log(1+L)/L/t[p+6]):L>0&&(_=-C*A*Math.log(1+L)/L):e.outboundAttractionDistribution?(L=1,_=-C*A/t[p+6]):(L=1,_=-C*A)),L>0&&(t[p+2]+=R*_,t[p+3]+=S*_,t[y+2]-=R*_,t[y+3]-=S*_);if(!0===u)for(v=0;v<l;v+=10)1!==t[v+9]&&((n=Math.sqrt(Math.pow(t[v+2],2)+Math.pow(t[v+3],2)))>10&&(t[v+2]=10*t[v+2]/n,t[v+3]=10*t[v+3]/n),r=t[v+6]*Math.sqrt((t[v+4]-t[v+2])*(t[v+4]-t[v+2])+(t[v+5]-t[v+3])*(t[v+5]-t[v+3])),o=.1*Math.log(1+(a=Math.sqrt((t[v+4]+t[v+2])*(t[v+4]+t[v+2])+(t[v+5]+t[v+3])*(t[v+5]+t[v+3]))/2))/(1+Math.sqrt(r)),s=t[v+0]+t[v+2]*(o/e.slowDown),t[v+0]=s,h=t[v+1]+t[v+3]*(o/e.slowDown),t[v+1]=h);else for(v=0;v<l;v+=10)1!==t[v+9]&&(r=t[v+6]*Math.sqrt((t[v+4]-t[v+2])*(t[v+4]-t[v+2])+(t[v+5]-t[v+3])*(t[v+5]-t[v+3])),a=Math.sqrt((t[v+4]+t[v+2])*(t[v+4]+t[v+2])+(t[v+5]+t[v+3])*(t[v+5]+t[v+3]))/2,o=t[v+7]*Math.log(1+a)/(1+Math.sqrt(r)),t[v+7]=Math.min(1,Math.sqrt(o*(Math.pow(t[v+2],2)+Math.pow(t[v+3],2))/(1+Math.sqrt(r)))),s=t[v+0]+t[v+2]*(o/e.slowDown),t[v+0]=s,h=t[v+1]+t[v+3]*(o/e.slowDown),t[v+1]=h);return{}}},3274,(e,t,i)=>{i.assign=function(e){e=e||{};var t,i,n,r=Array.prototype.slice.call(arguments).slice(1);for(t=0,n=r.length;t<n;t++)if(r[t])for(i in r[t])e[i]=r[t][i];return e},i.validateSettings=function(e){return"linLogMode"in e&&"boolean"!=typeof e.linLogMode?{message:"the `linLogMode` setting should be a boolean."}:"outboundAttractionDistribution"in e&&"boolean"!=typeof e.outboundAttractionDistribution?{message:"the `outboundAttractionDistribution` setting should be a boolean."}:"adjustSizes"in e&&"boolean"!=typeof e.adjustSizes?{message:"the `adjustSizes` setting should be a boolean."}:"edgeWeightInfluence"in e&&"number"!=typeof e.edgeWeightInfluence?{message:"the `edgeWeightInfluence` setting should be a number."}:"scalingRatio"in e&&!("number"==typeof e.scalingRatio&&e.scalingRatio>=0)?{message:"the `scalingRatio` setting should be a number >= 0."}:"strongGravityMode"in e&&"boolean"!=typeof e.strongGravityMode?{message:"the `strongGravityMode` setting should be a boolean."}:"gravity"in e&&!("number"==typeof e.gravity&&e.gravity>=0)?{message:"the `gravity` setting should be a number >= 0."}:"slowDown"in e&&!("number"==typeof e.slowDown||e.slowDown>=0)?{message:"the `slowDown` setting should be a number >= 0."}:"barnesHutOptimize"in e&&"boolean"!=typeof e.barnesHutOptimize?{message:"the `barnesHutOptimize` setting should be a boolean."}:"barnesHutTheta"in e&&!("number"==typeof e.barnesHutTheta&&e.barnesHutTheta>=0)?{message:"the `barnesHutTheta` setting should be a number >= 0."}:null},i.graphToByteArrays=function(e,t){var i,n=e.order,r=e.size,a={},o=new Float32Array(10*n),s=new Float32Array(3*r);return i=0,e.forEachNode(function(e,t){a[e]=i,o[i]=t.x,o[i+1]=t.y,o[i+2]=0,o[i+3]=0,o[i+4]=0,o[i+5]=0,o[i+6]=1,o[i+7]=1,o[i+8]=t.size||1,o[i+9]=+!!t.fixed,i+=10}),i=0,e.forEachEdge(function(e,n,r,h,l,d,u){var c=a[r],g=a[h],f=t(e,n,r,h,l,d,u);o[c+6]+=f,o[g+6]+=f,s[i]=c,s[i+1]=g,s[i+2]=f,i+=3}),{nodes:o,edges:s}},i.assignLayoutChanges=function(e,t,i){var n=0;e.updateEachNodeAttributes(function(e,r){return r.x=t[n],r.y=t[n+1],n+=10,i?i(e,r):r})},i.readGraphPositions=function(e,t){var i=0;e.forEachNode(function(e,n){t[i]=n.x,t[i+1]=n.y,i+=10})},i.collectLayoutChanges=function(e,t,i){for(var n=e.nodes(),r={},a=0,o=0,s=t.length;a<s;a+=10){if(i){var h=Object.assign({},e.getNodeAttributes(n[o]));h.x=t[a],h.y=t[a+1],h=i(n[o],h),r[n[o]]={x:h.x,y:h.y}}else r[n[o]]={x:t[a],y:t[a+1]};o++}return r},i.createWorker=function(e){var t=window.URL||window.webkitURL,i=e.toString(),n=t.createObjectURL(new Blob(["("+i+").call(this);"],{type:"text/javascript"})),r=new Worker(n);return t.revokeObjectURL(n),r}},95061,(e,t,i)=>{t.exports={linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:1,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5}},98422,(e,t,i)=>{var n=e.r(87331),r=e.r(59351).createEdgeWeightGetter,a=e.r(52171),o=e.r(3274),s=e.r(95061);function h(e,t,i){if(!n(t))throw Error("graphology-layout-forceatlas2: the given graph is not a valid graphology instance.");"number"==typeof i&&(i={iterations:i});var h,l=i.iterations;if("number"!=typeof l)throw Error("graphology-layout-forceatlas2: invalid number of iterations.");if(l<=0)throw Error("graphology-layout-forceatlas2: you should provide a positive number of iterations.");var d=r("getEdgeWeight"in i?i.getEdgeWeight:"weight").fromEntry,u="function"==typeof i.outputReducer?i.outputReducer:null,c=o.assign({},s,i.settings),g=o.validateSettings(c);if(g)throw Error("graphology-layout-forceatlas2: "+g.message);var f=o.graphToByteArrays(t,d);for(h=0;h<l;h++)a(c,f.nodes,f.edges);return e?void o.assignLayoutChanges(t,f.nodes,u):o.collectLayoutChanges(t,f.nodes)}var l=h.bind(null,!1);l.assign=h.bind(null,!0),l.inferSettings=function(e){var t="number"==typeof e?e:e.order;return{barnesHutOptimize:t>2e3,strongGravityMode:!0,gravity:.05,scalingRatio:10,slowDown:1+Math.log(t)}},t.exports=l},85931,(e,t,i)=>{t.exports=function(){var e,t,i={};i.exports=function(e,t,i){var n,r,a,o,s,h,l=t.length,d=i.length,u=e.adjustSizes,c=e.barnesHutTheta*e.barnesHutTheta,g=[];for(v=0;v<l;v+=10)t[v+4]=t[v+2],t[v+5]=t[v+3],t[v+2]=0,t[v+3]=0;if(e.outboundAttractionDistribution){for(v=0,k=0;v<l;v+=10)k+=t[v+6];k/=l/10}if(e.barnesHutOptimize){var f,m,v,p,y,b,E,x,w,T,k,C,R,S,A,L,_,F,N,D,M=1/0,P=-1/0,G=1/0,I=-1/0;for(v=0;v<l;v+=10)M=Math.min(M,t[v+0]),P=Math.max(P,t[v+0]),G=Math.min(G,t[v+1]),I=Math.max(I,t[v+1]);var z=P-M,O=I-G;for(z>O?(G-=(z-O)/2,I=G+z):(M-=(O-z)/2,P=M+O),g[0]=-1,g[1]=(M+P)/2,g[2]=(G+I)/2,g[3]=Math.max(P-M,I-G),g[4]=-1,g[5]=-1,g[6]=0,g[7]=0,g[8]=0,f=1,v=0;v<l;v+=10)for(m=0,D=3;;)if(g[m+5]>=0){F=t[v+0]<g[m+1]?t[v+1]<g[m+2]?g[m+5]:g[m+5]+9:t[v+1]<g[m+2]?g[m+5]+18:g[m+5]+27,g[m+7]=(g[m+7]*g[m+6]+t[v+0]*t[v+6])/(g[m+6]+t[v+6]),g[m+8]=(g[m+8]*g[m+6]+t[v+1]*t[v+6])/(g[m+6]+t[v+6]),g[m+6]+=t[v+6],m=F;continue}else if(g[m+0]<0){g[m+0]=v;break}else{if(g[m+5]=9*f,x=g[m+3]/2,w=g[m+5],g[w+0]=-1,g[w+1]=g[m+1]-x,g[w+2]=g[m+2]-x,g[w+3]=x,g[w+4]=w+9,g[w+5]=-1,g[w+6]=0,g[w+7]=0,g[w+8]=0,g[(w+=9)+0]=-1,g[w+1]=g[m+1]-x,g[w+2]=g[m+2]+x,g[w+3]=x,g[w+4]=w+9,g[w+5]=-1,g[w+6]=0,g[w+7]=0,g[w+8]=0,g[(w+=9)+0]=-1,g[w+1]=g[m+1]+x,g[w+2]=g[m+2]-x,g[w+3]=x,g[w+4]=w+9,g[w+5]=-1,g[w+6]=0,g[w+7]=0,g[w+8]=0,g[(w+=9)+0]=-1,g[w+1]=g[m+1]+x,g[w+2]=g[m+2]+x,g[w+3]=x,g[w+4]=g[m+4],g[w+5]=-1,g[w+6]=0,g[w+7]=0,g[w+8]=0,f+=4,F=t[g[m+0]+0]<g[m+1]?t[g[m+0]+1]<g[m+2]?g[m+5]:g[m+5]+9:t[g[m+0]+1]<g[m+2]?g[m+5]+18:g[m+5]+27,g[m+6]=t[g[m+0]+6],g[m+7]=t[g[m+0]+0],g[m+8]=t[g[m+0]+1],g[F+0]=g[m+0],g[m+0]=-1,F===(N=t[v+0]<g[m+1]?t[v+1]<g[m+2]?g[m+5]:g[m+5]+9:t[v+1]<g[m+2]?g[m+5]+18:g[m+5]+27))if(D--){m=F;continue}else{D=3;break}g[N+0]=v;break}}if(e.barnesHutOptimize)for(v=0,C=e.scalingRatio;v<l;v+=10)for(m=0;;)if(g[m+5]>=0){if(L=Math.pow(t[v+0]-g[m+7],2)+Math.pow(t[v+1]-g[m+8],2),4*(T=g[m+3])*T/L<c){if(R=t[v+0]-g[m+7],S=t[v+1]-g[m+8],!0===u?L>0?(_=C*t[v+6]*g[m+6]/L,t[v+2]+=R*_,t[v+3]+=S*_):L<0&&(_=-C*t[v+6]*g[m+6]/Math.sqrt(L),t[v+2]+=R*_,t[v+3]+=S*_):L>0&&(_=C*t[v+6]*g[m+6]/L,t[v+2]+=R*_,t[v+3]+=S*_),(m=g[m+4])<0)break;continue}m=g[m+5];continue}else{if((b=g[m+0])>=0&&b!==v&&(L=(R=t[v+0]-t[b+0])*R+(S=t[v+1]-t[b+1])*S,!0===u?L>0?(_=C*t[v+6]*t[b+6]/L,t[v+2]+=R*_,t[v+3]+=S*_):L<0&&(_=-C*t[v+6]*t[b+6]/Math.sqrt(L),t[v+2]+=R*_,t[v+3]+=S*_):L>0&&(_=C*t[v+6]*t[b+6]/L,t[v+2]+=R*_,t[v+3]+=S*_)),(m=g[m+4])<0)break;continue}else for(p=0,C=e.scalingRatio;p<l;p+=10)for(y=0;y<p;y+=10)R=t[p+0]-t[y+0],S=t[p+1]-t[y+1],!0===u?(L=Math.sqrt(R*R+S*S)-t[p+8]-t[y+8])>0?(_=C*t[p+6]*t[y+6]/L/L,t[p+2]+=R*_,t[p+3]+=S*_,t[y+2]-=R*_,t[y+3]-=S*_):L<0&&(_=100*C*t[p+6]*t[y+6],t[p+2]+=R*_,t[p+3]+=S*_,t[y+2]-=R*_,t[y+3]-=S*_):(L=Math.sqrt(R*R+S*S))>0&&(_=C*t[p+6]*t[y+6]/L/L,t[p+2]+=R*_,t[p+3]+=S*_,t[y+2]-=R*_,t[y+3]-=S*_);for(v=0,w=e.gravity/e.scalingRatio,C=e.scalingRatio;v<l;v+=10)_=0,L=Math.sqrt(Math.pow(R=t[v+0],2)+Math.pow(S=t[v+1],2)),e.strongGravityMode?L>0&&(_=C*t[v+6]*w):L>0&&(_=C*t[v+6]*w/L),t[v+2]-=R*_,t[v+3]-=S*_;for(E=0,C=+(e.outboundAttractionDistribution?k:1);E<d;E+=3)p=i[E+0],y=i[E+1],A=Math.pow(x=i[E+2],e.edgeWeightInfluence),R=t[p+0]-t[y+0],S=t[p+1]-t[y+1],!0===u?(L=Math.sqrt(R*R+S*S)-t[p+8]-t[y+8],e.linLogMode?e.outboundAttractionDistribution?L>0&&(_=-C*A*Math.log(1+L)/L/t[p+6]):L>0&&(_=-C*A*Math.log(1+L)/L):e.outboundAttractionDistribution?L>0&&(_=-C*A/t[p+6]):L>0&&(_=-C*A)):(L=Math.sqrt(Math.pow(R,2)+Math.pow(S,2)),e.linLogMode?e.outboundAttractionDistribution?L>0&&(_=-C*A*Math.log(1+L)/L/t[p+6]):L>0&&(_=-C*A*Math.log(1+L)/L):e.outboundAttractionDistribution?(L=1,_=-C*A/t[p+6]):(L=1,_=-C*A)),L>0&&(t[p+2]+=R*_,t[p+3]+=S*_,t[y+2]-=R*_,t[y+3]-=S*_);if(!0===u)for(v=0;v<l;v+=10)1!==t[v+9]&&((n=Math.sqrt(Math.pow(t[v+2],2)+Math.pow(t[v+3],2)))>10&&(t[v+2]=10*t[v+2]/n,t[v+3]=10*t[v+3]/n),r=t[v+6]*Math.sqrt((t[v+4]-t[v+2])*(t[v+4]-t[v+2])+(t[v+5]-t[v+3])*(t[v+5]-t[v+3])),o=.1*Math.log(1+(a=Math.sqrt((t[v+4]+t[v+2])*(t[v+4]+t[v+2])+(t[v+5]+t[v+3])*(t[v+5]+t[v+3]))/2))/(1+Math.sqrt(r)),s=t[v+0]+t[v+2]*(o/e.slowDown),t[v+0]=s,h=t[v+1]+t[v+3]*(o/e.slowDown),t[v+1]=h);else for(v=0;v<l;v+=10)1!==t[v+9]&&(r=t[v+6]*Math.sqrt((t[v+4]-t[v+2])*(t[v+4]-t[v+2])+(t[v+5]-t[v+3])*(t[v+5]-t[v+3])),a=Math.sqrt((t[v+4]+t[v+2])*(t[v+4]+t[v+2])+(t[v+5]+t[v+3])*(t[v+5]+t[v+3]))/2,o=t[v+7]*Math.log(1+a)/(1+Math.sqrt(r)),t[v+7]=Math.min(1,Math.sqrt(o*(Math.pow(t[v+2],2)+Math.pow(t[v+3],2))/(1+Math.sqrt(r)))),s=t[v+0]+t[v+2]*(o/e.slowDown),t[v+0]=s,h=t[v+1]+t[v+3]*(o/e.slowDown),t[v+1]=h);return{}};var n=i.exports;self.addEventListener("message",function(i){var r=i.data;e=new Float32Array(r.nodes),r.edges&&(t=new Float32Array(r.edges)),n(r.settings,e,t),self.postMessage({nodes:e.buffer},[e.buffer])})}},14487,(e,t,i)=>{var n=e.r(85931),r=e.r(87331),a=e.r(59351).createEdgeWeightGetter,o=e.r(3274),s=e.r(95061);function h(e,t){if(t=t||{},!r(e))throw Error("graphology-layout-forceatlas2/worker: the given graph is not a valid graphology instance.");var i=a("getEdgeWeight"in t?t.getEdgeWeight:"weight").fromEntry,n=o.assign({},s,t.settings),h=o.validateSettings(n);if(h)throw Error("graphology-layout-forceatlas2/worker: "+h.message);this.worker=null,this.graph=e,this.settings=n,this.getEdgeWeight=i,this.matrices=null,this.running=!1,this.killed=!1,this.outputReducer="function"==typeof t.outputReducer?t.outputReducer:null,this.handleMessage=this.handleMessage.bind(this);var l=void 0,d=this;this.handleGraphUpdate=function(){d.worker&&d.worker.terminate(),l&&clearTimeout(l),l=setTimeout(function(){l=void 0,d.spawnWorker()},0)},e.on("nodeAdded",this.handleGraphUpdate),e.on("edgeAdded",this.handleGraphUpdate),e.on("nodeDropped",this.handleGraphUpdate),e.on("edgeDropped",this.handleGraphUpdate),this.spawnWorker()}h.prototype.isRunning=function(){return this.running},h.prototype.spawnWorker=function(){this.worker&&this.worker.terminate(),this.worker=o.createWorker(n),this.worker.addEventListener("message",this.handleMessage),this.running&&(this.running=!1,this.start())},h.prototype.handleMessage=function(e){if(this.running){var t=new Float32Array(e.data.nodes);o.assignLayoutChanges(this.graph,t,this.outputReducer),this.outputReducer&&o.readGraphPositions(this.graph,t),this.matrices.nodes=t,this.askForIterations()}},h.prototype.askForIterations=function(e){var t=this.matrices,i={settings:this.settings,nodes:t.nodes.buffer},n=[t.nodes.buffer];return e&&(i.edges=t.edges.buffer,n.push(t.edges.buffer)),this.worker.postMessage(i,n),this},h.prototype.start=function(){if(this.killed)throw Error("graphology-layout-forceatlas2/worker.start: layout was killed.");return this.running||(this.matrices=o.graphToByteArrays(this.graph,this.getEdgeWeight),this.running=!0,this.askForIterations(!0)),this},h.prototype.stop=function(){return this.running=!1,this},h.prototype.kill=function(){if(this.killed)return this;this.running=!1,this.killed=!0,this.matrices=null,this.worker.terminate(),this.graph.removeListener("nodeAdded",this.handleGraphUpdate),this.graph.removeListener("edgeAdded",this.handleGraphUpdate),this.graph.removeListener("nodeDropped",this.handleGraphUpdate),this.graph.removeListener("edgeDropped",this.handleGraphUpdate)},t.exports=h},38875,(e,t,i)=>{function n(){return .01*(.5-Math.random())}t.exports=function(e,t){var i,r,a,o,s,h,l,d,u,c,g,f,m,v,p,y,b,E,x,w,T,k,C,R=e.margin,S=e.ratio,A=e.expansion,L=e.gridSize,_=e.speed,F=!0,N=t.length,D=N/3|0,M=new Float32Array(D),P=new Float32Array(D),G=1/0,I=1/0,z=-1/0,O=-1/0;for(j=0;j<N;j+=3)V=t[j+0],Z=t[j+1],G=Math.min(G,V-(X=t[j+2]*S+R)),z=Math.max(z,V+X),I=Math.min(I,Z-X),O=Math.max(O,Z+X);var B=z-G,U=O-I,H=(G+z)/2,W=(I+O)/2;G=H-A*B/2,z=H+A*B/2,I=W-A*U/2,O=W+A*U/2;var j,q,V,Z,Y,X,K,$=Array(L*L),J=$.length;for(K=0;K<J;K++)$[K]=[];for(j=0;j<N;j+=3)for(V=t[j+0],Z=t[j+1],i=V-(X=t[j+2]*S+R),r=V+X,a=Z-X,o=Z+X,s=Math.floor(L*(i-G)/(z-G)),h=Math.floor(L*(r-G)/(z-G)),l=Math.floor(L*(a-I)/(O-I)),d=Math.floor(L*(o-I)/(O-I)),u=s;u<=h;u++)for(c=l;c<=d;c++)$[u*L+c].push(j);var Q=new Set;for(K=0;K<J;K++)for(j=0,Y=(g=$[K]).length;j<Y;j++)for(v=t[(f=g[j])+0],y=t[f+1],E=t[f+2],q=j+1;q<Y;q++)w=f+"§"+(m=g[q]),!(J>1&&Q.has(w))&&(J>1&&Q.add(w),p=t[m+0],b=t[m+1],x=t[m+2],(C=Math.sqrt((T=p-v)*T+(k=b-y)*k))<E*S+R+(x*S+R)&&(F=!1,m=m/3|0,C>0?(M[m]+=T/C*(1+E),P[m]+=k/C*(1+E)):(M[m]+=B*n(),P[m]+=U*n())));for(j=0,q=0;j<N;j+=3,q++)t[j+0]+=.1*M[q]*_,t[j+1]+=.1*P[q]*_;return{converged:F}}},87372,(e,t,i)=>{i.validateSettings=function(e){return"gridSize"in e&&"number"!=typeof e.gridSize||e.gridSize<=0?{message:"the `gridSize` setting should be a positive number."}:"margin"in e&&"number"!=typeof e.margin||e.margin<0?{message:"the `margin` setting should be 0 or a positive number."}:"expansion"in e&&"number"!=typeof e.expansion||e.expansion<=0?{message:"the `expansion` setting should be a positive number."}:"ratio"in e&&"number"!=typeof e.ratio||e.ratio<=0?{message:"the `ratio` setting should be a positive number."}:"speed"in e&&"number"!=typeof e.speed||e.speed<=0?{message:"the `speed` setting should be a positive number."}:null},i.graphToByteArray=function(e,t){var i=new Float32Array(3*e.order),n=0;return e.forEachNode(function(e,r){"function"==typeof t&&(r=t(e,r)),i[n]=r.x,i[n+1]=r.y,i[n+2]=r.size||1,n+=3}),i},i.assignLayoutChanges=function(e,t,i){var n=0;e.forEachNode(function(r){var a={x:t[n],y:t[n+1]};"function"==typeof i&&(a=i(r,a)),e.mergeNodeAttributes(r,a),n+=3})},i.collectLayoutChanges=function(e,t,i){var n={},r=0;return e.forEachNode(function(e){var a={x:t[r],y:t[r+1]};"function"==typeof i&&(a=i(e,a)),n[e]=a,r+=3}),n},i.createWorker=function(e){var t=window.URL||window.webkitURL,i=e.toString(),n=t.createObjectURL(new Blob(["("+i+").call(this);"],{type:"text/javascript"})),r=new Worker(n);return t.revokeObjectURL(n),r}},86190,(e,t,i)=>{t.exports={gridSize:20,margin:5,expansion:1.1,ratio:1,speed:3}},50843,(e,t,i)=>{var n=e.r(87331),r=e.r(38875),a=e.r(87372),o=e.r(86190);function s(e,t,i){if(!n(t))throw Error("graphology-layout-noverlap: the given graph is not a valid graphology instance.");var s=(i="number"==typeof i?{maxIterations:i}:i||{}).maxIterations||500;if("number"!=typeof s||s<=0)throw Error("graphology-layout-force: you should provide a positive number of maximum iterations.");var h=Object.assign({},o,i.settings),l=a.validateSettings(h);if(l)throw Error("graphology-layout-noverlap: "+l.message);var d,u=a.graphToByteArray(t,i.inputReducer),c=!1;for(d=0;d<s&&!c;d++)c=r(h,u).converged;return e?void a.assignLayoutChanges(t,u,i.outputReducer):a.collectLayoutChanges(t,u,i.outputReducer)}var h=s.bind(null,!1);h.assign=s.bind(null,!0),t.exports=h},69551,(e,t,i)=>{t.exports=function(){var e,t={};function i(){return .01*(.5-Math.random())}t.exports=function(e,t){var n,r,a,o,s,h,l,d,u,c,g,f,m,v,p,y,b,E,x,w,T,k,C,R=e.margin,S=e.ratio,A=e.expansion,L=e.gridSize,_=e.speed,F=!0,N=t.length,D=N/3|0,M=new Float32Array(D),P=new Float32Array(D),G=1/0,I=1/0,z=-1/0,O=-1/0;for(j=0;j<N;j+=3)V=t[j+0],Z=t[j+1],G=Math.min(G,V-(X=t[j+2]*S+R)),z=Math.max(z,V+X),I=Math.min(I,Z-X),O=Math.max(O,Z+X);var B=z-G,U=O-I,H=(G+z)/2,W=(I+O)/2;G=H-A*B/2,z=H+A*B/2,I=W-A*U/2,O=W+A*U/2;var j,q,V,Z,Y,X,K,$=Array(L*L),J=$.length;for(K=0;K<J;K++)$[K]=[];for(j=0;j<N;j+=3)for(V=t[j+0],Z=t[j+1],n=V-(X=t[j+2]*S+R),r=V+X,a=Z-X,o=Z+X,s=Math.floor(L*(n-G)/(z-G)),h=Math.floor(L*(r-G)/(z-G)),l=Math.floor(L*(a-I)/(O-I)),d=Math.floor(L*(o-I)/(O-I)),u=s;u<=h;u++)for(c=l;c<=d;c++)$[u*L+c].push(j);var Q=new Set;for(K=0;K<J;K++)for(j=0,Y=(g=$[K]).length;j<Y;j++)for(v=t[(f=g[j])+0],y=t[f+1],E=t[f+2],q=j+1;q<Y;q++)w=f+"§"+(m=g[q]),!(J>1&&Q.has(w))&&(J>1&&Q.add(w),p=t[m+0],b=t[m+1],x=t[m+2],(C=Math.sqrt((T=p-v)*T+(k=b-y)*k))<E*S+R+(x*S+R)&&(F=!1,m=m/3|0,C>0?(M[m]+=T/C*(1+E),P[m]+=k/C*(1+E)):(M[m]+=B*i(),P[m]+=U*i())));for(j=0,q=0;j<N;j+=3,q++)t[j+0]+=.1*M[q]*_,t[j+1]+=.1*P[q]*_;return{converged:F}};var n=t.exports;self.addEventListener("message",function(t){var i=t.data;e=new Float32Array(i.nodes);var r=n(i.settings,e);self.postMessage({result:r,nodes:e.buffer},[e.buffer])})}},68105,(e,t,i)=>{var n=e.r(69551),r=e.r(87331),a=e.r(87372),o=e.r(86190);function s(e,t){if(t=t||{},!r(e))throw Error("graphology-layout-noverlap/worker: the given graph is not a valid graphology instance.");var i=Object.assign({},o,t.settings),n=a.validateSettings(i);if(n)throw Error("graphology-layout-noverlap/worker: "+n.message);this.worker=null,this.graph=e,this.settings=i,this.matrices=null,this.running=!1,this.killed=!1,this.inputReducer=t.inputReducer,this.outputReducer=t.outputReducer,this.callbacks={onConverged:"function"==typeof t.onConverged?t.onConverged:null},this.handleMessage=this.handleMessage.bind(this);var s=!1,h=this;this.handleAddition=function(){s||(s=!0,h.spawnWorker(),setTimeout(function(){s=!1},0))},e.on("nodeAdded",this.handleAddition),e.on("edgeAdded",this.handleAddition),this.spawnWorker()}s.prototype.isRunning=function(){return this.running},s.prototype.spawnWorker=function(){this.worker&&this.worker.terminate(),this.worker=a.createWorker(n),this.worker.addEventListener("message",this.handleMessage),this.running&&(this.running=!1,this.start())},s.prototype.handleMessage=function(e){if(this.running){var t=new Float32Array(e.data.nodes);if(a.assignLayoutChanges(this.graph,t,this.outputReducer),this.matrices.nodes=t,e.data.result.converged){this.callbacks.onConverged&&this.callbacks.onConverged(),this.stop();return}this.askForIterations()}},s.prototype.askForIterations=function(){var e=this.matrices,t={settings:this.settings,nodes:e.nodes.buffer},i=[e.nodes.buffer];return this.worker.postMessage(t,i),this},s.prototype.start=function(){if(this.killed)throw Error("graphology-layout-noverlap/worker.start: layout was killed.");return this.running||(this.matrices={nodes:a.graphToByteArray(this.graph,this.inputReducer)},this.running=!0,this.askForIterations()),this},s.prototype.stop=function(){return this.running=!1,this},s.prototype.kill=function(){if(this.killed)return this;this.running=!1,this.killed=!0,this.matrices=null,this.worker.terminate(),this.graph.removeListener("nodeAdded",this.handleAddition),this.graph.removeListener("edgeAdded",this.handleAddition)},t.exports=s},33026,e=>{"use strict";e.s(["default",()=>td],33026);var t=e.i(81583),i=e.i(46571),n=e.i(5624),r=e.i(19134);function a(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function o(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function h(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function u(e,t,i){return t=l(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e,d()?Reflect.construct(t,i||[],l(e).constructor):t.apply(e,i))}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}function m(e,t){if(e){if("string"==typeof e)return f(e,t);var i=({}).toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?f(e,t):void 0}}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,a,o,s=[],h=!0,l=!1;try{if(a=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;h=!1}else for(;!(h=(n=a.call(i)).done)&&(s.push(n.value),s.length!==t);h=!0);}catch(e){l=!0,r=e}finally{try{if(!h&&null!=i.return&&(o=i.return(),Object(o)!==o))return}finally{if(l)throw r}}return s}}(e,t)||m(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var p={black:"#000000",silver:"#C0C0C0",gray:"#808080",grey:"#808080",white:"#FFFFFF",maroon:"#800000",red:"#FF0000",purple:"#800080",fuchsia:"#FF00FF",green:"#008000",lime:"#00FF00",olive:"#808000",yellow:"#FFFF00",navy:"#000080",blue:"#0000FF",teal:"#008080",aqua:"#00FFFF",darkblue:"#00008B",mediumblue:"#0000CD",darkgreen:"#006400",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",springgreen:"#00FF7F",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",rebeccapurple:"#663399",mediumaquamarine:"#66CDAA",dimgray:"#696969",dimgrey:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",slategrey:"#708090",lightslategray:"#778899",lightslategrey:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370DB",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",palevioletred:"#DB7093",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",lightyellow:"#FFFFE0",ivory:"#FFFFF0"},y=new Int8Array(4),b=new Int32Array(y.buffer,0,1),E=new Float32Array(y.buffer,0,1),x=/^\s*rgba?\s*\(/,w=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/,T={};for(var k in p)T[k]=R(p[k]),T[p[k]]=T[k];function C(e,t,i,n,r){return b[0]=n<<24|i<<16|t<<8|e,r&&(b[0]=0xfeffffff&b[0]),E[0]}function R(e){if(void 0!==T[e=e.toLowerCase()])return T[e];var t=function(e){var t=0,i=0,n=0,r=1;if("#"===e[0])4===e.length?(t=parseInt(e.charAt(1)+e.charAt(1),16),i=parseInt(e.charAt(2)+e.charAt(2),16),n=parseInt(e.charAt(3)+e.charAt(3),16)):(t=parseInt(e.charAt(1)+e.charAt(2),16),i=parseInt(e.charAt(3)+e.charAt(4),16),n=parseInt(e.charAt(5)+e.charAt(6),16)),9===e.length&&(r=parseInt(e.charAt(7)+e.charAt(8),16)/255);else if(x.test(e)){var a=e.match(w);a&&(t=+a[1],i=+a[2],n=+a[3],a[4]&&(r=+a[4]))}return{r:t,g:i,b:n,a:r}}(e),i=t.r,n=t.g,r=t.b,a=t.a,o=C(i,n,r,a=255*a|0,!0);return T[e]=o,o}var S={};function A(e){if(void 0!==S[e])return S[e];var t=C((0xff0000&e)>>>16,(65280&e)>>>8,255&e,255,!0);return S[e]=t,t}function L(e,t,i,n){return i+(t<<8)+(e<<16)}function _(e,t,i,n,r,a){var o=Math.floor(i/a*r),s=Math.floor(e.drawingBufferHeight/a-n/a*r),h=new Uint8Array(4);e.bindFramebuffer(e.FRAMEBUFFER,t),e.readPixels(o,s,1,1,e.RGBA,e.UNSIGNED_BYTE,h);var l=v(h,4);return[l[0],l[1],l[2],l[3]]}function F(e,t,i){return(t=a(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function N(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function D(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?N(Object(i),!0).forEach(function(t){F(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):N(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function M(){return(M="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!({}).hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(arguments.length<3?e:i):r.value}}).apply(null,arguments)}function P(e,t,i,n){var r=M(l(1&n?e.prototype:e),t,i);return 2&n&&"function"==typeof r?function(e){return r.apply(i,e)}:r}function G(e){var t=0;return e.forEach(function(e){return t+=e.normalized?1:e.size}),t}function I(e,t,i){var n="VERTEX"===e?t.VERTEX_SHADER:t.FRAGMENT_SHADER,r=t.createShader(n);if(null===r)throw Error("loadShader: error while creating the shader");if(t.shaderSource(r,i),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS)){var a=t.getShaderInfoLog(r);throw t.deleteShader(r),Error("loadShader: error while compiling the shader:\n".concat(a,"\n").concat(i))}return r}function z(e){var t=e.gl,i=e.buffer,n=e.program,r=e.vertexShader,a=e.fragmentShader;t.deleteShader(r),t.deleteShader(a),t.deleteProgram(n),t.deleteBuffer(i)}var O="#define PICKING_MODE\n",B=F(F(F(F(F(F(F(F({},WebGL2RenderingContext.BOOL,1),WebGL2RenderingContext.BYTE,1),WebGL2RenderingContext.UNSIGNED_BYTE,1),WebGL2RenderingContext.SHORT,2),WebGL2RenderingContext.UNSIGNED_SHORT,2),WebGL2RenderingContext.INT,4),WebGL2RenderingContext.UNSIGNED_INT,4),WebGL2RenderingContext.FLOAT,4),U=h(function e(t,i,n){o(this,e),F(this,"array",new Float32Array),F(this,"constantArray",new Float32Array),F(this,"capacity",0),F(this,"verticesCount",0);var r=this.getDefinition();if(this.VERTICES=r.VERTICES,this.VERTEX_SHADER_SOURCE=r.VERTEX_SHADER_SOURCE,this.FRAGMENT_SHADER_SOURCE=r.FRAGMENT_SHADER_SOURCE,this.UNIFORMS=r.UNIFORMS,this.ATTRIBUTES=r.ATTRIBUTES,this.METHOD=r.METHOD,this.CONSTANT_ATTRIBUTES="CONSTANT_ATTRIBUTES"in r?r.CONSTANT_ATTRIBUTES:[],this.CONSTANT_DATA="CONSTANT_DATA"in r?r.CONSTANT_DATA:[],this.isInstanced="CONSTANT_ATTRIBUTES"in r,this.ATTRIBUTES_ITEMS_COUNT=G(this.ATTRIBUTES),this.STRIDE=this.VERTICES*this.ATTRIBUTES_ITEMS_COUNT,this.renderer=n,this.normalProgram=this.getProgramInfo("normal",t,r.VERTEX_SHADER_SOURCE,r.FRAGMENT_SHADER_SOURCE,null),this.pickProgram=i?this.getProgramInfo("pick",t,O+r.VERTEX_SHADER_SOURCE,O+r.FRAGMENT_SHADER_SOURCE,i):null,this.isInstanced){var a=G(this.CONSTANT_ATTRIBUTES);if(this.CONSTANT_DATA.length!==this.VERTICES)throw Error("Program: error while getting constant data (expected ".concat(this.VERTICES," items, received ").concat(this.CONSTANT_DATA.length," instead)"));this.constantArray=new Float32Array(this.CONSTANT_DATA.length*a);for(var s=0;s<this.CONSTANT_DATA.length;s++){var h=this.CONSTANT_DATA[s];if(h.length!==a)throw Error("Program: error while getting constant data (one vector has ".concat(h.length," items instead of ").concat(a,")"));for(var l=0;l<h.length;l++)this.constantArray[s*a+l]=h[l]}this.STRIDE=this.ATTRIBUTES_ITEMS_COUNT}},[{key:"kill",value:function(){z(this.normalProgram),this.pickProgram&&(z(this.pickProgram),this.pickProgram=null)}},{key:"getProgramInfo",value:function(e,t,i,n,r){var a,o=this.getDefinition(),s=t.createBuffer();if(null===s)throw Error("Program: error while creating the WebGL buffer.");var h=I("VERTEX",t,i),l=I("FRAGMENT",t,n),d=function(e,t){var i,n,r=e.createProgram();if(null===r)throw Error("loadProgram: error while creating the program.");for(i=0,n=t.length;i<n;i++)e.attachShader(r,t[i]);if(e.linkProgram(r),!e.getProgramParameter(r,e.LINK_STATUS))throw e.deleteProgram(r),Error("loadProgram: error while linking the program.");return r}(t,[h,l]),u={};o.UNIFORMS.forEach(function(e){var i=t.getUniformLocation(d,e);i&&(u[e]=i)});var c={};if(o.ATTRIBUTES.forEach(function(e){c[e.name]=t.getAttribLocation(d,e.name)}),"CONSTANT_ATTRIBUTES"in o&&(o.CONSTANT_ATTRIBUTES.forEach(function(e){c[e.name]=t.getAttribLocation(d,e.name)}),null===(a=t.createBuffer())))throw Error("Program: error while creating the WebGL constant buffer.");return{name:e,program:d,gl:t,frameBuffer:r,buffer:s,constantBuffer:a||{},uniformLocations:u,attributeLocations:c,isPicking:"pick"===e,vertexShader:h,fragmentShader:l}}},{key:"bindProgram",value:function(e){var t=this,i=0,n=e.gl,r=e.buffer;this.isInstanced?(n.bindBuffer(n.ARRAY_BUFFER,e.constantBuffer),i=0,this.CONSTANT_ATTRIBUTES.forEach(function(n){return i+=t.bindAttribute(n,e,i,!1)}),n.bufferData(n.ARRAY_BUFFER,this.constantArray,n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,e.buffer),i=0,this.ATTRIBUTES.forEach(function(n){return i+=t.bindAttribute(n,e,i,!0)})):(n.bindBuffer(n.ARRAY_BUFFER,r),i=0,this.ATTRIBUTES.forEach(function(n){return i+=t.bindAttribute(n,e,i)})),n.bufferData(n.ARRAY_BUFFER,this.array,n.DYNAMIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null)}},{key:"unbindProgram",value:function(e){var t=this;this.isInstanced?(this.CONSTANT_ATTRIBUTES.forEach(function(i){return t.unbindAttribute(i,e,!1)}),this.ATTRIBUTES.forEach(function(i){return t.unbindAttribute(i,e,!0)})):this.ATTRIBUTES.forEach(function(i){return t.unbindAttribute(i,e)})}},{key:"bindAttribute",value:function(e,t,i,n){var r=B[e.type];if("number"!=typeof r)throw Error('Program.bind: yet unsupported attribute type "'.concat(e.type,'"'));var a=t.attributeLocations[e.name],o=t.gl;if(-1!==a){o.enableVertexAttribArray(a);var s=this.isInstanced?(n?this.ATTRIBUTES_ITEMS_COUNT:G(this.CONSTANT_ATTRIBUTES))*Float32Array.BYTES_PER_ELEMENT:this.ATTRIBUTES_ITEMS_COUNT*Float32Array.BYTES_PER_ELEMENT;if(o.vertexAttribPointer(a,e.size,e.type,e.normalized||!1,s,i),this.isInstanced&&n)if(o instanceof WebGL2RenderingContext)o.vertexAttribDivisor(a,1);else{var h=o.getExtension("ANGLE_instanced_arrays");h&&h.vertexAttribDivisorANGLE(a,1)}}return e.size*r}},{key:"unbindAttribute",value:function(e,t,i){var n=t.attributeLocations[e.name],r=t.gl;if(-1!==n&&(r.disableVertexAttribArray(n),this.isInstanced&&i))if(r instanceof WebGL2RenderingContext)r.vertexAttribDivisor(n,0);else{var a=r.getExtension("ANGLE_instanced_arrays");a&&a.vertexAttribDivisorANGLE(n,0)}}},{key:"reallocate",value:function(e){e!==this.capacity&&(this.capacity=e,this.verticesCount=this.VERTICES*e,this.array=new Float32Array(!this.isInstanced?this.verticesCount*this.ATTRIBUTES_ITEMS_COUNT:this.capacity*this.ATTRIBUTES_ITEMS_COUNT))}},{key:"hasNothingToRender",value:function(){return 0===this.verticesCount}},{key:"renderProgram",value:function(e,t){var i=t.gl,n=t.program;i.enable(i.BLEND),i.useProgram(n),this.setUniforms(e,t),this.drawWebGL(this.METHOD,t)}},{key:"render",value:function(e){this.hasNothingToRender()||(this.pickProgram&&(this.pickProgram.gl.viewport(0,0,e.width*e.pixelRatio/e.downSizingRatio,e.height*e.pixelRatio/e.downSizingRatio),this.bindProgram(this.pickProgram),this.renderProgram(D(D({},e),{},{pixelRatio:e.pixelRatio/e.downSizingRatio}),this.pickProgram),this.unbindProgram(this.pickProgram)),this.normalProgram.gl.viewport(0,0,e.width*e.pixelRatio,e.height*e.pixelRatio),this.bindProgram(this.normalProgram),this.renderProgram(e,this.normalProgram),this.unbindProgram(this.normalProgram))}},{key:"drawWebGL",value:function(e,t){var i=t.gl,n=t.frameBuffer;if(i.bindFramebuffer(i.FRAMEBUFFER,n),this.isInstanced)if(i instanceof WebGL2RenderingContext)i.drawArraysInstanced(e,0,this.VERTICES,this.capacity);else{var r=i.getExtension("ANGLE_instanced_arrays");r&&r.drawArraysInstancedANGLE(e,0,this.VERTICES,this.capacity)}else i.drawArrays(e,0,this.verticesCount)}}]),H=function(e){function t(){return o(this,t),u(this,t,arguments)}return g(t,e),h(t,[{key:"kill",value:function(){P(t,"kill",this,3)([])}},{key:"process",value:function(e,t,i){var n=t*this.STRIDE;if(i.hidden){for(var r=n+this.STRIDE;n<r;n++)this.array[n]=0;return}return this.processVisibleItem(A(e),n,i)}}])}(U),W=function(e){function t(){var e;o(this,t);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];return F(e=u(this,t,[].concat(n)),"drawLabel",void 0),e}return g(t,e),h(t,[{key:"kill",value:function(){P(t,"kill",this,3)([])}},{key:"process",value:function(e,t,i,n,r){var a=t*this.STRIDE;if(r.hidden||i.hidden||n.hidden){for(var o=a+this.STRIDE;a<o;a++)this.array[a]=0;return}return this.processVisibleItem(A(e),a,i,n,r)}}])}(U);function j(e,t,i){if(t.label){var n=i.labelSize,r=i.labelFont,a=i.labelWeight;e.fillStyle=i.labelColor.attribute?t[i.labelColor.attribute]||i.labelColor.color||"#000":i.labelColor.color,e.font="".concat(a," ").concat(n,"px ").concat(r),e.fillText(t.label,t.x+t.size+3,t.y+n/3)}}var q=WebGLRenderingContext,V=q.UNSIGNED_BYTE,Z=q.FLOAT,Y=["u_sizeRatio","u_correctionRatio","u_matrix"],X=function(e){function t(){return o(this,t),u(this,t,arguments)}return g(t,e),h(t,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:"\nattribute vec4 a_id;\nattribute vec4 a_color;\nattribute vec2 a_position;\nattribute float a_size;\nattribute float a_angle;\n\nuniform mat3 u_matrix;\nuniform float u_sizeRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_diffVector;\nvarying float v_radius;\nvarying float v_border;\n\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  float size = a_size * u_correctionRatio / u_sizeRatio * 4.0;\n  vec2 diffVector = size * vec2(cos(a_angle), sin(a_angle));\n  vec2 position = a_position + diffVector;\n  gl_Position = vec4(\n    (u_matrix * vec3(position, 1)).xy,\n    0,\n    1\n  );\n\n  v_diffVector = diffVector;\n  v_radius = size / 2.0;\n\n  #ifdef PICKING_MODE\n  // For picking mode, we use the ID as the color:\n  v_color = a_id;\n  #else\n  // For normal mode, we use the color:\n  v_color = a_color;\n  #endif\n\n  v_color.a *= bias;\n}\n",FRAGMENT_SHADER_SOURCE:"\nprecision highp float;\n\nvarying vec4 v_color;\nvarying vec2 v_diffVector;\nvarying float v_radius;\n\nuniform float u_correctionRatio;\n\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\nvoid main(void) {\n  float border = u_correctionRatio * 2.0;\n  float dist = length(v_diffVector) - v_radius + border;\n\n  // No antialiasing for picking mode:\n  #ifdef PICKING_MODE\n  if (dist > border)\n    gl_FragColor = transparent;\n  else\n    gl_FragColor = v_color;\n\n  #else\n  float t = 0.0;\n  if (dist > border)\n    t = 1.0;\n  else if (dist > 0.0)\n    t = dist / border;\n\n  gl_FragColor = mix(v_color, transparent, t);\n  #endif\n}\n",METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:Y,ATTRIBUTES:[{name:"a_position",size:2,type:Z},{name:"a_size",size:1,type:Z},{name:"a_color",size:4,type:V,normalized:!0},{name:"a_id",size:4,type:V,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_angle",size:1,type:Z}],CONSTANT_DATA:[[t.ANGLE_1],[t.ANGLE_2],[t.ANGLE_3]]}}},{key:"processVisibleItem",value:function(e,t,i){var n=this.array,r=R(i.color);n[t++]=i.x,n[t++]=i.y,n[t++]=i.size,n[t++]=r,n[t++]=e}},{key:"setUniforms",value:function(e,t){var i=t.gl,n=t.uniformLocations,r=n.u_sizeRatio,a=n.u_correctionRatio,o=n.u_matrix;i.uniform1f(a,e.correctionRatio),i.uniform1f(r,e.sizeRatio),i.uniformMatrix3fv(o,!1,e.matrix)}}])}(H);F(X,"ANGLE_1",0),F(X,"ANGLE_2",2*Math.PI/3),F(X,"ANGLE_3",4*Math.PI/3);var K=WebGLRenderingContext,$=K.UNSIGNED_BYTE,J=K.FLOAT,Q=["u_matrix","u_sizeRatio","u_correctionRatio","u_minEdgeThickness","u_lengthToThicknessRatio","u_widenessToThicknessRatio"],ee={extremity:"target",lengthToThicknessRatio:2.5,widenessToThicknessRatio:2};function et(e){var t=D(D({},ee),e||{});function i(){return o(this,i),u(this,i,arguments)}return g(i,W),h(i,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:"\nattribute vec2 a_position;\nattribute vec2 a_normal;\nattribute float a_radius;\nattribute vec3 a_barycentric;\n\n#ifdef PICKING_MODE\nattribute vec4 a_id;\n#else\nattribute vec4 a_color;\n#endif\n\nuniform mat3 u_matrix;\nuniform float u_sizeRatio;\nuniform float u_correctionRatio;\nuniform float u_minEdgeThickness;\nuniform float u_lengthToThicknessRatio;\nuniform float u_widenessToThicknessRatio;\n\nvarying vec4 v_color;\n\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  float minThickness = u_minEdgeThickness;\n\n  float normalLength = length(a_normal);\n  vec2 unitNormal = a_normal / normalLength;\n\n  // These first computations are taken from edge.vert.glsl and\n  // edge.clamped.vert.glsl. Please read it to get better comments on what's\n  // happening:\n  float pixelsThickness = max(normalLength / u_sizeRatio, minThickness);\n  float webGLThickness = pixelsThickness * u_correctionRatio;\n  float webGLNodeRadius = a_radius * 2.0 * u_correctionRatio / u_sizeRatio;\n  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;\n  float webGLArrowHeadThickness = webGLThickness * u_widenessToThicknessRatio;\n\n  float da = a_barycentric.x;\n  float db = a_barycentric.y;\n  float dc = a_barycentric.z;\n\n  vec2 delta = vec2(\n      da * (webGLNodeRadius * unitNormal.y)\n    + db * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y + webGLArrowHeadThickness * unitNormal.x)\n    + dc * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y - webGLArrowHeadThickness * unitNormal.x),\n\n      da * (-webGLNodeRadius * unitNormal.x)\n    + db * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x + webGLArrowHeadThickness * unitNormal.y)\n    + dc * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x - webGLArrowHeadThickness * unitNormal.y)\n  );\n\n  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;\n\n  gl_Position = vec4(position, 0, 1);\n\n  #ifdef PICKING_MODE\n  // For picking mode, we use the ID as the color:\n  v_color = a_id;\n  #else\n  // For normal mode, we use the color:\n  v_color = a_color;\n  #endif\n\n  v_color.a *= bias;\n}\n",FRAGMENT_SHADER_SOURCE:"\nprecision mediump float;\n\nvarying vec4 v_color;\n\nvoid main(void) {\n  gl_FragColor = v_color;\n}\n",METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:Q,ATTRIBUTES:[{name:"a_position",size:2,type:J},{name:"a_normal",size:2,type:J},{name:"a_radius",size:1,type:J},{name:"a_color",size:4,type:$,normalized:!0},{name:"a_id",size:4,type:$,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_barycentric",size:3,type:J}],CONSTANT_DATA:[[1,0,0],[0,1,0],[0,0,1]]}}},{key:"processVisibleItem",value:function(e,i,n,r,a){if("source"===t.extremity){var o=[r,n];n=o[0],r=o[1]}var s=a.size||1,h=r.size||1,l=n.x,d=n.y,u=r.x,c=r.y,g=R(a.color),f=u-l,m=c-d,v=f*f+m*m,p=0,y=0;v&&(p=-m*(v=1/Math.sqrt(v))*s,y=f*v*s);var b=this.array;b[i++]=u,b[i++]=c,b[i++]=-p,b[i++]=-y,b[i++]=h,b[i++]=g,b[i++]=e}},{key:"setUniforms",value:function(e,i){var n=i.gl,r=i.uniformLocations,a=r.u_matrix,o=r.u_sizeRatio,s=r.u_correctionRatio,h=r.u_minEdgeThickness,l=r.u_lengthToThicknessRatio,d=r.u_widenessToThicknessRatio;n.uniformMatrix3fv(a,!1,e.matrix),n.uniform1f(o,e.sizeRatio),n.uniform1f(s,e.correctionRatio),n.uniform1f(h,e.minEdgeThickness),n.uniform1f(l,t.lengthToThicknessRatio),n.uniform1f(d,t.widenessToThicknessRatio)}}])}et();var ei="\nprecision mediump float;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\nvarying float v_feather;\n\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\nvoid main(void) {\n  // We only handle antialiasing for normal mode:\n  #ifdef PICKING_MODE\n  gl_FragColor = v_color;\n  #else\n  float dist = length(v_normal) * v_thickness;\n\n  float t = smoothstep(\n    v_thickness - v_feather,\n    v_thickness,\n    dist\n  );\n\n  gl_FragColor = mix(v_color, transparent, t);\n  #endif\n}\n",en=WebGLRenderingContext,er=en.UNSIGNED_BYTE,ea=en.FLOAT,eo=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness","u_lengthToThicknessRatio"],es={lengthToThicknessRatio:ee.lengthToThicknessRatio};function eh(e){var t=D(D({},es),e||{});function i(){return o(this,i),u(this,i,arguments)}return g(i,W),h(i,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:"\nattribute vec4 a_id;\nattribute vec4 a_color;\nattribute vec2 a_normal;\nattribute float a_normalCoef;\nattribute vec2 a_positionStart;\nattribute vec2 a_positionEnd;\nattribute float a_positionCoef;\nattribute float a_radius;\nattribute float a_radiusCoef;\n\nuniform mat3 u_matrix;\nuniform float u_zoomRatio;\nuniform float u_sizeRatio;\nuniform float u_pixelRatio;\nuniform float u_correctionRatio;\nuniform float u_minEdgeThickness;\nuniform float u_lengthToThicknessRatio;\nuniform float u_feather;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\nvarying float v_feather;\n\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  float minThickness = u_minEdgeThickness;\n\n  float radius = a_radius * a_radiusCoef;\n  vec2 normal = a_normal * a_normalCoef;\n  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;\n\n  float normalLength = length(normal);\n  vec2 unitNormal = normal / normalLength;\n\n  // These first computations are taken from edge.vert.glsl. Please read it to\n  // get better comments on what's happening:\n  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);\n  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;\n\n  // Here, we move the point to leave space for the arrow head:\n  float direction = sign(radius);\n  float webGLNodeRadius = direction * radius * 2.0 * u_correctionRatio / u_sizeRatio;\n  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;\n\n  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (webGLNodeRadius + webGLArrowHeadLength);\n\n  // Here is the proper position of the vertex\n  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness + compensationVector, 1)).xy, 0, 1);\n\n  v_thickness = webGLThickness / u_zoomRatio;\n\n  v_normal = unitNormal;\n\n  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;\n\n  #ifdef PICKING_MODE\n  // For picking mode, we use the ID as the color:\n  v_color = a_id;\n  #else\n  // For normal mode, we use the color:\n  v_color = a_color;\n  #endif\n\n  v_color.a *= bias;\n}\n",FRAGMENT_SHADER_SOURCE:ei,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:eo,ATTRIBUTES:[{name:"a_positionStart",size:2,type:ea},{name:"a_positionEnd",size:2,type:ea},{name:"a_normal",size:2,type:ea},{name:"a_color",size:4,type:er,normalized:!0},{name:"a_id",size:4,type:er,normalized:!0},{name:"a_radius",size:1,type:ea}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:ea},{name:"a_normalCoef",size:1,type:ea},{name:"a_radiusCoef",size:1,type:ea}],CONSTANT_DATA:[[0,1,0],[0,-1,0],[1,1,1],[1,1,1],[0,-1,0],[1,-1,-1]]}}},{key:"processVisibleItem",value:function(e,t,i,n,r){var a=r.size||1,o=i.x,s=i.y,h=n.x,l=n.y,d=R(r.color),u=h-o,c=l-s,g=n.size||1,f=u*u+c*c,m=0,v=0;f&&(m=-c*(f=1/Math.sqrt(f))*a,v=u*f*a);var p=this.array;p[t++]=o,p[t++]=s,p[t++]=h,p[t++]=l,p[t++]=m,p[t++]=v,p[t++]=d,p[t++]=e,p[t++]=g}},{key:"setUniforms",value:function(e,i){var n=i.gl,r=i.uniformLocations,a=r.u_matrix,o=r.u_zoomRatio,s=r.u_feather,h=r.u_pixelRatio,l=r.u_correctionRatio,d=r.u_sizeRatio,u=r.u_minEdgeThickness,c=r.u_lengthToThicknessRatio;n.uniformMatrix3fv(a,!1,e.matrix),n.uniform1f(o,e.zoomRatio),n.uniform1f(d,e.sizeRatio),n.uniform1f(l,e.correctionRatio),n.uniform1f(h,e.pixelRatio),n.uniform1f(s,e.antiAliasingFeather),n.uniform1f(u,e.minEdgeThickness),n.uniform1f(c,t.lengthToThicknessRatio)}}])}eh();var el=function(e){var t;return t=[eh(void 0),et(void 0)],h(function e(i,n,r){o(this,e),F(this,"drawLabel",void 0),this.programs=t.map(function(e){return new e(i,n,r)})},[{key:"reallocate",value:function(e){this.programs.forEach(function(t){return t.reallocate(e)})}},{key:"process",value:function(e,t,i,n,r){this.programs.forEach(function(a){return a.process(e,t,i,n,r)})}},{key:"render",value:function(e){this.programs.forEach(function(t){return t.render(e)})}},{key:"kill",value:function(){this.programs.forEach(function(e){return e.kill()})}}])}(),ed=WebGLRenderingContext,eu=ed.UNSIGNED_BYTE,ec=ed.FLOAT,eg=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness"],ef=function(e){function t(){return o(this,t),u(this,t,arguments)}return g(t,e),h(t,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:'\nattribute vec4 a_id;\nattribute vec4 a_color;\nattribute vec2 a_normal;\nattribute float a_normalCoef;\nattribute vec2 a_positionStart;\nattribute vec2 a_positionEnd;\nattribute float a_positionCoef;\n\nuniform mat3 u_matrix;\nuniform float u_sizeRatio;\nuniform float u_zoomRatio;\nuniform float u_pixelRatio;\nuniform float u_correctionRatio;\nuniform float u_minEdgeThickness;\nuniform float u_feather;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\nvarying float v_feather;\n\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  float minThickness = u_minEdgeThickness;\n\n  vec2 normal = a_normal * a_normalCoef;\n  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;\n\n  float normalLength = length(normal);\n  vec2 unitNormal = normal / normalLength;\n\n  // We require edges to be at least "minThickness" pixels thick *on screen*\n  // (so we need to compensate the size ratio):\n  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);\n\n  // Then, we need to retrieve the normalized thickness of the edge in the WebGL\n  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction\n  // ratio:\n  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;\n\n  // Here is the proper position of the vertex\n  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness, 1)).xy, 0, 1);\n\n  // For the fragment shader though, we need a thickness that takes the "magic"\n  // correction ratio into account (as in webGLThickness), but so that the\n  // antialiasing effect does not depend on the zoom level. So here\'s yet\n  // another thickness version:\n  v_thickness = webGLThickness / u_zoomRatio;\n\n  v_normal = unitNormal;\n\n  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;\n\n  #ifdef PICKING_MODE\n  // For picking mode, we use the ID as the color:\n  v_color = a_id;\n  #else\n  // For normal mode, we use the color:\n  v_color = a_color;\n  #endif\n\n  v_color.a *= bias;\n}\n',FRAGMENT_SHADER_SOURCE:ei,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:eg,ATTRIBUTES:[{name:"a_positionStart",size:2,type:ec},{name:"a_positionEnd",size:2,type:ec},{name:"a_normal",size:2,type:ec},{name:"a_color",size:4,type:eu,normalized:!0},{name:"a_id",size:4,type:eu,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:ec},{name:"a_normalCoef",size:1,type:ec}],CONSTANT_DATA:[[0,1],[0,-1],[1,1],[1,1],[0,-1],[1,-1]]}}},{key:"processVisibleItem",value:function(e,t,i,n,r){var a=r.size||1,o=i.x,s=i.y,h=n.x,l=n.y,d=R(r.color),u=h-o,c=l-s,g=u*u+c*c,f=0,m=0;g&&(f=-c*(g=1/Math.sqrt(g))*a,m=u*g*a);var v=this.array;v[t++]=o,v[t++]=s,v[t++]=h,v[t++]=l,v[t++]=f,v[t++]=m,v[t++]=d,v[t++]=e}},{key:"setUniforms",value:function(e,t){var i=t.gl,n=t.uniformLocations,r=n.u_matrix,a=n.u_zoomRatio,o=n.u_feather,s=n.u_pixelRatio,h=n.u_correctionRatio,l=n.u_sizeRatio,d=n.u_minEdgeThickness;i.uniformMatrix3fv(r,!1,e.matrix),i.uniform1f(a,e.zoomRatio),i.uniform1f(l,e.sizeRatio),i.uniform1f(h,e.correctionRatio),i.uniform1f(s,e.pixelRatio),i.uniform1f(o,e.antiAliasingFeather),i.uniform1f(d,e.minEdgeThickness)}}])}(W),em=function(e){function t(){var e;return o(this,t),(e=u(this,t)).rawEmitter=e,e}return g(t,e),h(t)}(e.i(35460).EventEmitter),ev=e.i(87331),ep={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},ey={easing:"quadraticInOut",duration:150};function eb(){return Float32Array.of(1,0,0,0,1,0,0,0,1)}function eE(e,t,i){return e[0]=t,e[4]="number"==typeof i?i:t,e}function ex(e,t){var i=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=i,e[3]=-i,e[4]=n,e}function ew(e,t,i){return e[6]=t,e[7]=i,e}function eT(e,t){var i=e[0],n=e[1],r=e[2],a=e[3],o=e[4],s=e[5],h=e[6],l=e[7],d=e[8],u=t[0],c=t[1],g=t[2],f=t[3],m=t[4],v=t[5],p=t[6],y=t[7],b=t[8];return e[0]=u*i+c*a+g*h,e[1]=u*n+c*o+g*l,e[2]=u*r+c*s+g*d,e[3]=f*i+m*a+v*h,e[4]=f*n+m*o+v*l,e[5]=f*r+m*s+v*d,e[6]=p*i+y*a+b*h,e[7]=p*n+y*o+b*l,e[8]=p*r+y*s+b*d,e}function ek(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=e[0],r=e[1],a=e[3],o=e[4],s=e[6],h=e[7],l=t.x,d=t.y;return{x:l*n+d*a+s*i,y:l*r+d*o+h*i}}function eC(e,t,i,n,r){var a,o,s=e.angle,h=e.ratio,l=e.x,d=e.y,u=t.width,c=t.height,g=eb(),f=Math.min(u,c)-2*n,m=(a=t.height/t.width,o=i.height/i.width,a<1&&o>1||a>1&&o<1?1:Math.min(Math.max(o,1/o),Math.max(1/a,a)));return r?(eT(g,ew(eb(),l,d)),eT(g,eE(eb(),h)),eT(g,ex(eb(),s)),eT(g,eE(eb(),u/f/2/m,c/f/2/m))):(eT(g,eE(eb(),f/u*2*m,f/c*2*m)),eT(g,ex(eb(),-s)),eT(g,eE(eb(),1/h)),eT(g,ew(eb(),-l,-d))),g}function eR(){return void 0!==window.devicePixelRatio?window.devicePixelRatio:1}function eS(e,t,i){return i.sort(function(e,i){var n=t(e)||0,r=t(i)||0;return n<r?-1:+(n>r)})}function eA(e){var t=v(e.x,2),i=t[0],n=t[1],r=v(e.y,2),a=r[0],o=r[1],s=Math.max(n-i,o-a),h=(n+i)/2,l=(o+a)/2;(0===s||Math.abs(s)===1/0||isNaN(s))&&(s=1),isNaN(h)&&(h=0),isNaN(l)&&(l=0);var d=function(e){return{x:.5+(e.x-h)/s,y:.5+(e.y-l)/s}};return d.applyTo=function(e){e.x=.5+(e.x-h)/s,e.y=.5+(e.y-l)/s},d.inverse=function(e){return{x:h+s*(e.x-.5),y:l+s*(e.y-.5)}},d.ratio=s,d}function eL(e){return(eL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e_(e,t){var i=t.size;if(0!==i){var n=e.length;e.length+=i;var r=0;t.forEach(function(t){e[n+r]=t,r++})}}function eF(e){e=e||{};for(var t=0,i=arguments.length<=1?0:arguments.length-1;t<i;t++){var n=t+1<1||arguments.length<=t+1?void 0:arguments[t+1];n&&Object.assign(e,n)}return e}var eN={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeEvents:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,defaultDrawEdgeLabel:function(e,t,i,n,r){var a,o=r.edgeLabelSize,s=r.edgeLabelFont,h=r.edgeLabelWeight,l=r.edgeLabelColor.attribute?t[r.edgeLabelColor.attribute]||r.edgeLabelColor.color||"#000":r.edgeLabelColor.color,d=t.label;if(d){e.fillStyle=l,e.font="".concat(h," ").concat(o,"px ").concat(s);var u=i.size,c=n.size,g=i.x,f=i.y,m=n.x,v=n.y,p=(g+m)/2,y=(f+v)/2,b=m-g,E=v-f,x=Math.sqrt(b*b+E*E);if(!(x<u+c)){g+=b*u/x,f+=E*u/x,m-=b*c/x,v-=E*c/x,p=(g+m)/2,y=(f+v)/2,x=Math.sqrt((b=m-g)*b+(E=v-f)*E);var w=e.measureText(d).width;if(w>x){for(d+="…",w=e.measureText(d).width;w>x&&d.length>1;)d=d.slice(0,-2)+"…",w=e.measureText(d).width;if(d.length<4)return}a=b>0?E>0?Math.acos(b/x):Math.asin(E/x):E>0?Math.acos(b/x)+Math.PI:Math.asin(b/x)+Math.PI/2,e.save(),e.translate(p,y),e.rotate(a),e.fillText(d,-w/2,t.size/2+o),e.restore()}}},defaultDrawNodeLabel:j,defaultDrawNodeHover:function(e,t,i){var n=i.labelSize,r=i.labelFont,a=i.labelWeight;if(e.font="".concat(a," ").concat(n,"px ").concat(r),e.fillStyle="#FFF",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=8,e.shadowColor="#000","string"==typeof t.label){var o=Math.round(e.measureText(t.label).width+5),s=Math.round(n+4),h=Math.max(t.size,n/2)+2,l=Math.asin(s/2/h),d=Math.sqrt(Math.abs(Math.pow(h,2)-Math.pow(s/2,2)));e.beginPath(),e.moveTo(t.x+d,t.y+s/2),e.lineTo(t.x+h+o,t.y+s/2),e.lineTo(t.x+h+o,t.y-s/2),e.lineTo(t.x+d,t.y-s/2),e.arc(t.x,t.y,h,l,-l),e.closePath(),e.fill()}else e.beginPath(),e.arc(t.x,t.y,t.size+2,0,2*Math.PI),e.closePath(),e.fill();e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,j(e,t,i)},minEdgeThickness:1.7,antiAliasingFeather:1,dragTimeout:100,draggedEventsTolerance:3,inertiaDuration:200,inertiaRatio:3,zoomDuration:250,zoomingRatio:1.7,doubleClickTimeout:300,doubleClickZoomingRatio:2.2,doubleClickZoomingDuration:200,tapMoveTolerance:10,zoomToSizeRatioFunction:Math.sqrt,itemSizesReference:"screen",autoRescale:!0,autoCenter:!0,labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,minCameraRatio:null,maxCameraRatio:null,enableCameraZooming:!0,enableCameraPanning:!0,enableCameraRotation:!0,cameraPanBoundaries:null,allowInvalidContainer:!1,nodeProgramClasses:{},nodeHoverProgramClasses:{},edgeProgramClasses:{}},eD={circle:X},eM={arrow:el,line:ef};function eP(e){if("number"!=typeof e.labelDensity||e.labelDensity<0)throw Error("Settings: invalid `labelDensity`. Expecting a positive number.");var t=e.minCameraRatio,i=e.maxCameraRatio;if("number"==typeof t&&"number"==typeof i&&i<t)throw Error("Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.")}var eG=function(e){function t(){var e;return o(this,t),F(e=u(this,t),"x",.5),F(e,"y",.5),F(e,"angle",0),F(e,"ratio",1),F(e,"minRatio",null),F(e,"maxRatio",null),F(e,"enabledZooming",!0),F(e,"enabledPanning",!0),F(e,"enabledRotation",!0),F(e,"clean",null),F(e,"nextFrame",null),F(e,"previousState",null),F(e,"enabled",!0),e.previousState=e.getState(),e}return g(t,e),h(t,[{key:"enable",value:function(){return this.enabled=!0,this}},{key:"disable",value:function(){return this.enabled=!1,this}},{key:"getState",value:function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}}},{key:"hasState",value:function(e){return this.x===e.x&&this.y===e.y&&this.ratio===e.ratio&&this.angle===e.angle}},{key:"getPreviousState",value:function(){var e=this.previousState;return e?{x:e.x,y:e.y,angle:e.angle,ratio:e.ratio}:null}},{key:"getBoundedRatio",value:function(e){var t=e;return"number"==typeof this.minRatio&&(t=Math.max(t,this.minRatio)),"number"==typeof this.maxRatio&&(t=Math.min(t,this.maxRatio)),t}},{key:"validateState",value:function(e){var t={};return this.enabledPanning&&"number"==typeof e.x&&(t.x=e.x),this.enabledPanning&&"number"==typeof e.y&&(t.y=e.y),this.enabledZooming&&"number"==typeof e.ratio&&(t.ratio=this.getBoundedRatio(e.ratio)),this.enabledRotation&&"number"==typeof e.angle&&(t.angle=e.angle),this.clean?this.clean(D(D({},this.getState()),t)):t}},{key:"isAnimated",value:function(){return!!this.nextFrame}},{key:"setState",value:function(e){if(!this.enabled)return this;this.previousState=this.getState();var t=this.validateState(e);return"number"==typeof t.x&&(this.x=t.x),"number"==typeof t.y&&(this.y=t.y),"number"==typeof t.ratio&&(this.ratio=t.ratio),"number"==typeof t.angle&&(this.angle=t.angle),this.hasState(this.previousState)||this.emit("updated",this.getState()),this}},{key:"updateState",value:function(e){return this.setState(e(this.getState())),this}},{key:"animate",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(!n)return new Promise(function(n){return t.animate(e,i,n)});if(this.enabled){var r=D(D({},ey),i),a=this.validateState(e),o="function"==typeof r.easing?r.easing:ep[r.easing],s=Date.now(),h=this.getState(),l=function(){var e=(Date.now()-s)/r.duration;if(e>=1){t.nextFrame=null,t.setState(a),t.animationCallback&&(t.animationCallback.call(null),t.animationCallback=void 0);return}var i=o(e),n={};"number"==typeof a.x&&(n.x=h.x+(a.x-h.x)*i),"number"==typeof a.y&&(n.y=h.y+(a.y-h.y)*i),t.enabledRotation&&"number"==typeof a.angle&&(n.angle=h.angle+(a.angle-h.angle)*i),"number"==typeof a.ratio&&(n.ratio=h.ratio+(a.ratio-h.ratio)*i),t.setState(n),t.nextFrame=requestAnimationFrame(l)};this.nextFrame?(cancelAnimationFrame(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=requestAnimationFrame(l)):l(),this.animationCallback=n}}},{key:"animatedZoom",value:function(e){return e?"number"==typeof e?this.animate({ratio:this.ratio/e}):this.animate({ratio:this.ratio/(e.factor||1.5)},e):this.animate({ratio:this.ratio/1.5})}},{key:"animatedUnzoom",value:function(e){return e?"number"==typeof e?this.animate({ratio:this.ratio*e}):this.animate({ratio:this.ratio*(e.factor||1.5)},e):this.animate({ratio:1.5*this.ratio})}},{key:"animatedReset",value:function(e){return this.animate({x:.5,y:.5,ratio:1,angle:0},e)}},{key:"copy",value:function(){return t.from(this.getState())}}],[{key:"from",value:function(e){return new t().setState(e)}}])}(em);function eI(e,t){var i=t.getBoundingClientRect();return{x:e.clientX-i.left,y:e.clientY-i.top}}function ez(e,t){var i=D(D({},eI(e,t)),{},{sigmaDefaultPrevented:!1,preventSigmaDefault:function(){i.sigmaDefaultPrevented=!0},original:e});return i}function eO(e){var t="x"in e?e:D(D({},e.touches[0]||e.previousTouches[0]),{},{original:e.original,sigmaDefaultPrevented:e.sigmaDefaultPrevented,preventSigmaDefault:function(){e.sigmaDefaultPrevented=!0,t.sigmaDefaultPrevented=!0}});return t}function eB(e){for(var t=[],i=0,n=Math.min(e.length,2);i<n;i++)t.push(e[i]);return t}function eU(e,t,i){var n={touches:eB(e.touches).map(function(e){return eI(e,i)}),previousTouches:t.map(function(e){return eI(e,i)}),sigmaDefaultPrevented:!1,preventSigmaDefault:function(){n.sigmaDefaultPrevented=!0},original:e};return n}function eH(e){if(void 0!==e.deltaY)return -3*e.deltaY/360;if(void 0!==e.detail)return-(e.detail/9);throw Error("Captor: could not extract delta from event.")}var eW=function(e){function t(e,i){var n;return o(this,t),(n=u(this,t)).container=e,n.renderer=i,n}return g(t,e),h(t)}(em),ej=["doubleClickTimeout","doubleClickZoomingDuration","doubleClickZoomingRatio","dragTimeout","draggedEventsTolerance","inertiaDuration","inertiaRatio","zoomDuration","zoomingRatio"].reduce(function(e,t){return D(D({},e),{},F({},t,eN[t]))},{}),eq=function(e){function t(e,i){var n;return o(this,t),F(n=u(this,t,[e,i]),"enabled",!0),F(n,"draggedEvents",0),F(n,"downStartTime",null),F(n,"lastMouseX",null),F(n,"lastMouseY",null),F(n,"isMouseDown",!1),F(n,"isMoving",!1),F(n,"movingTimeout",null),F(n,"startCameraState",null),F(n,"clicks",0),F(n,"doubleClickTimeout",null),F(n,"currentWheelDirection",0),F(n,"settings",ej),n.handleClick=n.handleClick.bind(n),n.handleRightClick=n.handleRightClick.bind(n),n.handleDown=n.handleDown.bind(n),n.handleUp=n.handleUp.bind(n),n.handleMove=n.handleMove.bind(n),n.handleWheel=n.handleWheel.bind(n),n.handleLeave=n.handleLeave.bind(n),n.handleEnter=n.handleEnter.bind(n),e.addEventListener("click",n.handleClick,{capture:!1}),e.addEventListener("contextmenu",n.handleRightClick,{capture:!1}),e.addEventListener("mousedown",n.handleDown,{capture:!1}),e.addEventListener("wheel",n.handleWheel,{capture:!1}),e.addEventListener("mouseleave",n.handleLeave,{capture:!1}),e.addEventListener("mouseenter",n.handleEnter,{capture:!1}),document.addEventListener("mousemove",n.handleMove,{capture:!1}),document.addEventListener("mouseup",n.handleUp,{capture:!1}),n}return g(t,e),h(t,[{key:"kill",value:function(){var e=this.container;e.removeEventListener("click",this.handleClick),e.removeEventListener("contextmenu",this.handleRightClick),e.removeEventListener("mousedown",this.handleDown),e.removeEventListener("wheel",this.handleWheel),e.removeEventListener("mouseleave",this.handleLeave),e.removeEventListener("mouseenter",this.handleEnter),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleUp)}},{key:"handleClick",value:function(e){var t=this;if(this.enabled){if(this.clicks++,2===this.clicks)return this.clicks=0,"number"==typeof this.doubleClickTimeout&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(e);setTimeout(function(){t.clicks=0,t.doubleClickTimeout=null},this.settings.doubleClickTimeout),this.draggedEvents<this.settings.draggedEventsTolerance&&this.emit("click",ez(e,this.container))}}},{key:"handleRightClick",value:function(e){this.enabled&&this.emit("rightClick",ez(e,this.container))}},{key:"handleDoubleClick",value:function(e){if(this.enabled){e.preventDefault(),e.stopPropagation();var t=ez(e,this.container);if(this.emit("doubleClick",t),!t.sigmaDefaultPrevented){var i=this.renderer.getCamera(),n=i.getBoundedRatio(i.getState().ratio/this.settings.doubleClickZoomingRatio);i.animate(this.renderer.getViewportZoomedState(eI(e,this.container),n),{easing:"quadraticInOut",duration:this.settings.doubleClickZoomingDuration})}}}},{key:"handleDown",value:function(e){if(this.enabled){if(0===e.button){this.startCameraState=this.renderer.getCamera().getState();var t=eI(e,this.container),i=t.x,n=t.y;this.lastMouseX=i,this.lastMouseY=n,this.draggedEvents=0,this.downStartTime=Date.now(),this.isMouseDown=!0}this.emit("mousedown",ez(e,this.container))}}},{key:"handleUp",value:function(e){var t=this;if(this.enabled&&this.isMouseDown){var i=this.renderer.getCamera();this.isMouseDown=!1,"number"==typeof this.movingTimeout&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var n=eI(e,this.container),r=n.x,a=n.y,o=i.getState(),s=i.getPreviousState()||{x:0,y:0};this.isMoving?i.animate({x:o.x+this.settings.inertiaRatio*(o.x-s.x),y:o.y+this.settings.inertiaRatio*(o.y-s.y)},{duration:this.settings.inertiaDuration,easing:"quadraticOut"}):(this.lastMouseX!==r||this.lastMouseY!==a)&&i.setState({x:o.x,y:o.y}),this.isMoving=!1,setTimeout(function(){var e=t.draggedEvents>0;t.draggedEvents=0,e&&t.renderer.getSetting("hideEdgesOnMove")&&t.renderer.refresh()},0),this.emit("mouseup",ez(e,this.container))}}},{key:"handleMove",value:function(e){var t=this;if(this.enabled){var i=ez(e,this.container);if(this.emit("mousemovebody",i),(e.target===this.container||e.composedPath()[0]===this.container)&&this.emit("mousemove",i),!i.sigmaDefaultPrevented&&this.isMouseDown){this.isMoving=!0,this.draggedEvents++,"number"==typeof this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){t.movingTimeout=null,t.isMoving=!1},this.settings.dragTimeout);var n=this.renderer.getCamera(),r=eI(e,this.container),a=r.x,o=r.y,s=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),h=this.renderer.viewportToFramedGraph({x:a,y:o}),l=s.x-h.x,d=s.y-h.y,u=n.getState(),c=u.x+l,g=u.y+d;n.setState({x:c,y:g}),this.lastMouseX=a,this.lastMouseY=o,e.preventDefault(),e.stopPropagation()}}}},{key:"handleLeave",value:function(e){this.emit("mouseleave",ez(e,this.container))}},{key:"handleEnter",value:function(e){this.emit("mouseenter",ez(e,this.container))}},{key:"handleWheel",value:function(e){var t=this,i=this.renderer.getCamera();if(!this.enabled||!i.enabledZooming)return;var n=eH(e);if(n){var r=D(D({},ez(e,this.container)),{},{delta:eH(e)});if(this.emit("wheel",r),r.sigmaDefaultPrevented){e.preventDefault(),e.stopPropagation();return}var a=i.getState().ratio,o=n>0?1/this.settings.zoomingRatio:this.settings.zoomingRatio,s=i.getBoundedRatio(a*o),h=n>0?1:-1,l=Date.now();a!==s&&(e.preventDefault(),e.stopPropagation(),this.currentWheelDirection===h&&this.lastWheelTriggerTime&&l-this.lastWheelTriggerTime<this.settings.zoomDuration/5||(i.animate(this.renderer.getViewportZoomedState(eI(e,this.container),s),{easing:"quadraticOut",duration:this.settings.zoomDuration},function(){t.currentWheelDirection=0}),this.currentWheelDirection=h,this.lastWheelTriggerTime=l))}}},{key:"setSettings",value:function(e){this.settings=e}}])}(eW),eV=["dragTimeout","inertiaDuration","inertiaRatio","doubleClickTimeout","doubleClickZoomingRatio","doubleClickZoomingDuration","tapMoveTolerance"].reduce(function(e,t){return D(D({},e),{},F({},t,eN[t]))},{}),eZ=function(e){function t(e,i){var n;return o(this,t),F(n=u(this,t,[e,i]),"enabled",!0),F(n,"isMoving",!1),F(n,"hasMoved",!1),F(n,"touchMode",0),F(n,"startTouchesPositions",[]),F(n,"lastTouches",[]),F(n,"lastTap",null),F(n,"settings",eV),n.handleStart=n.handleStart.bind(n),n.handleLeave=n.handleLeave.bind(n),n.handleMove=n.handleMove.bind(n),e.addEventListener("touchstart",n.handleStart,{capture:!1}),e.addEventListener("touchcancel",n.handleLeave,{capture:!1}),document.addEventListener("touchend",n.handleLeave,{capture:!1,passive:!1}),document.addEventListener("touchmove",n.handleMove,{capture:!1,passive:!1}),n}return g(t,e),h(t,[{key:"kill",value:function(){var e=this.container;e.removeEventListener("touchstart",this.handleStart),e.removeEventListener("touchcancel",this.handleLeave),document.removeEventListener("touchend",this.handleLeave),document.removeEventListener("touchmove",this.handleMove)}},{key:"getDimensions",value:function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}}},{key:"handleStart",value:function(e){var t=this;if(this.enabled){e.preventDefault();var i=eB(e.touches);if(this.touchMode=i.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=i.map(function(e){return eI(e,t.container)}),2===this.touchMode){var n=v(this.startTouchesPositions,2),r=n[0],a=r.x,o=r.y,s=n[1],h=s.x,l=s.y;this.startTouchesAngle=Math.atan2(l-o,h-a),this.startTouchesDistance=Math.sqrt(Math.pow(h-a,2)+Math.pow(l-o,2))}this.emit("touchdown",eU(e,this.lastTouches,this.container)),this.lastTouches=i,this.lastTouchesPositions=this.startTouchesPositions}}},{key:"handleLeave",value:function(e){if(this.enabled&&this.startTouchesPositions.length){switch(e.cancelable&&e.preventDefault(),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(1===e.touches.length){this.handleStart(e),e.preventDefault();break}case 1:if(this.isMoving){var t=this.renderer.getCamera(),i=t.getState(),n=t.getPreviousState()||{x:0,y:0};t.animate({x:i.x+this.settings.inertiaRatio*(i.x-n.x),y:i.y+this.settings.inertiaRatio*(i.y-n.y)},{duration:this.settings.inertiaDuration,easing:"quadraticOut"})}this.hasMoved=!1,this.isMoving=!1,this.touchMode=0}if(this.emit("touchup",eU(e,this.lastTouches,this.container)),!e.touches.length){var r=eI(this.lastTouches[0],this.container),a=this.startTouchesPositions[0],o=Math.pow(r.x-a.x,2)+Math.pow(r.y-a.y,2);if(!e.touches.length&&o<Math.pow(this.settings.tapMoveTolerance,2))if(this.lastTap&&Date.now()-this.lastTap.time<this.settings.doubleClickTimeout){var s=eU(e,this.lastTouches,this.container);if(this.emit("doubletap",s),this.lastTap=null,!s.sigmaDefaultPrevented){var h=this.renderer.getCamera(),l=h.getBoundedRatio(h.getState().ratio/this.settings.doubleClickZoomingRatio);h.animate(this.renderer.getViewportZoomedState(r,l),{easing:"quadraticInOut",duration:this.settings.doubleClickZoomingDuration})}}else{var d=eU(e,this.lastTouches,this.container);this.emit("tap",d),this.lastTap={time:Date.now(),position:d.touches[0]||d.previousTouches[0]}}}this.lastTouches=eB(e.touches),this.startTouchesPositions=[]}}},{key:"handleMove",value:function(e){var t=this;if(this.enabled&&this.startTouchesPositions.length){e.preventDefault();var i=eB(e.touches),n=i.map(function(e){return eI(e,t.container)}),r=this.lastTouches;this.lastTouches=i,this.lastTouchesPositions=n;var a=eU(e,r,this.container);if((this.emit("touchmove",a),!a.sigmaDefaultPrevented)&&(this.hasMoved||(this.hasMoved=n.some(function(e,i){var n=t.startTouchesPositions[i];return n&&(e.x!==n.x||e.y!==n.y)})),this.hasMoved)){this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){t.isMoving=!1},this.settings.dragTimeout);var o=this.renderer.getCamera(),s=this.startCameraState,h=this.renderer.getSetting("stagePadding");switch(this.touchMode){case 1:var l=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),d=l.x,u=l.y,c=this.renderer.viewportToFramedGraph(n[0]),g=c.x,f=c.y;o.setState({x:s.x+d-g,y:s.y+u-f});break;case 2:var m={x:.5,y:.5,angle:0,ratio:1},v=n[0],p=v.x,y=v.y,b=n[1],E=b.x,x=b.y,w=Math.atan2(x-y,E-p)-this.startTouchesAngle,T=Math.hypot(x-y,E-p)/this.startTouchesDistance,k=o.getBoundedRatio(s.ratio/T);m.ratio=k,m.angle=s.angle+w;var C=this.getDimensions(),R=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:s}),S=Math.min(C.width,C.height)-2*h,A=S/C.width,L=S/C.height,_=k/S,F=p-S/2/A,N=y-S/2/L,D=[F*Math.cos(-m.angle)-N*Math.sin(-m.angle),N*Math.cos(-m.angle)+F*Math.sin(-m.angle)];F=D[0],N=D[1],m.x=R.x-F*_,m.y=R.y+N*_,o.setState(m)}}}}},{key:"setSettings",value:function(e){this.settings=e}}])}(eW);function eY(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eX(e,t){if(null==e)return{};var i,n,r=function(e,t){if(null==e)return{};var i={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;i[n]=e[n]}return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)i=a[n],-1===t.indexOf(i)&&({}).propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}var eK=h(function e(t,i){o(this,e),this.key=t,this.size=i},null,[{key:"compare",value:function(e,t){return e.size>t.size?-1:e.size<t.size||e.key>t.key?1:-1}}]),e$=h(function e(){o(this,e),F(this,"width",0),F(this,"height",0),F(this,"cellSize",0),F(this,"columns",0),F(this,"rows",0),F(this,"cells",{})},[{key:"resizeAndClear",value:function(e,t){this.width=e.width,this.height=e.height,this.cellSize=t,this.columns=Math.ceil(e.width/t),this.rows=Math.ceil(e.height/t),this.cells={}}},{key:"getIndex",value:function(e){var t=Math.floor(e.x/this.cellSize);return Math.floor(e.y/this.cellSize)*this.columns+t}},{key:"add",value:function(e,t,i){var n=new eK(e,t),r=this.getIndex(i),a=this.cells[r];a||(a=[],this.cells[r]=a),a.push(n)}},{key:"organize",value:function(){for(var e in this.cells)this.cells[e].sort(eK.compare)}},{key:"getLabelsToDisplay",value:function(e,t){var i=this.cellSize*this.cellSize,n=Math.ceil(i/e/e*t/i),r=[];for(var a in this.cells)for(var o=this.cells[a],s=0;s<Math.min(n,o.length);s++)r.push(o[s].key);return r}}]),eJ=Object.prototype.hasOwnProperty,eQ=function(e){function t(e,i){var n,r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o(this,t),F(r=u(this,t),"elements",{}),F(r,"canvasContexts",{}),F(r,"webGLContexts",{}),F(r,"pickingLayers",new Set),F(r,"textures",{}),F(r,"frameBuffers",{}),F(r,"activeListeners",{}),F(r,"labelGrid",new e$),F(r,"nodeDataCache",{}),F(r,"edgeDataCache",{}),F(r,"nodeProgramIndex",{}),F(r,"edgeProgramIndex",{}),F(r,"nodesWithForcedLabels",new Set),F(r,"edgesWithForcedLabels",new Set),F(r,"nodeExtent",{x:[0,1],y:[0,1]}),F(r,"nodeZExtent",[1/0,-1/0]),F(r,"edgeZExtent",[1/0,-1/0]),F(r,"matrix",eb()),F(r,"invMatrix",eb()),F(r,"correctionRatio",1),F(r,"customBBox",null),F(r,"normalizationFunction",eA({x:[0,1],y:[0,1]})),F(r,"graphToViewportRatio",1),F(r,"itemIDsIndex",{}),F(r,"nodeIndices",{}),F(r,"edgeIndices",{}),F(r,"width",0),F(r,"height",0),F(r,"pixelRatio",eR()),F(r,"pickingDownSizingRatio",2*r.pixelRatio),F(r,"displayedNodeLabels",new Set),F(r,"displayedEdgeLabels",new Set),F(r,"highlightedNodes",new Set),F(r,"hoveredNode",null),F(r,"hoveredEdge",null),F(r,"renderFrame",null),F(r,"renderHighlightedNodesFrame",null),F(r,"needToProcess",!1),F(r,"checkEdgesEventsFrame",null),F(r,"nodePrograms",{}),F(r,"nodeHoverPrograms",{}),F(r,"edgePrograms",{}),(n=eF({},eN,a)).nodeProgramClasses=eF({},eD,n.nodeProgramClasses),n.edgeProgramClasses=eF({},eM,n.edgeProgramClasses),r.settings=n,eP(r.settings);if(!(0,ev.default)(e))throw Error("Sigma: invalid graph instance.");if(e.forEachNode(function(e,t){if(!Number.isFinite(t.x)||!Number.isFinite(t.y))throw Error("Sigma: Coordinates of node ".concat(e," are invalid. A node must have a numeric 'x' and 'y' attribute."))}),!(i instanceof HTMLElement))throw Error("Sigma: container should be an html element.");for(var s in r.graph=e,r.container=i,r.createWebGLContext("edges",{picking:a.enableEdgeEvents}),r.createCanvasContext("edgeLabels"),r.createWebGLContext("nodes",{picking:!0}),r.createCanvasContext("labels"),r.createCanvasContext("hovers"),r.createWebGLContext("hoverNodes"),r.createCanvasContext("mouse",{style:{touchAction:"none",userSelect:"none"}}),r.resize(),r.settings.nodeProgramClasses)r.registerNodeProgram(s,r.settings.nodeProgramClasses[s],r.settings.nodeHoverProgramClasses[s]);for(var h in r.settings.edgeProgramClasses)r.registerEdgeProgram(h,r.settings.edgeProgramClasses[h]);return r.camera=new eG,r.bindCameraHandlers(),r.mouseCaptor=new eq(r.elements.mouse,r),r.mouseCaptor.setSettings(r.settings),r.touchCaptor=new eZ(r.elements.mouse,r),r.touchCaptor.setSettings(r.settings),r.bindEventHandlers(),r.bindGraphHandlers(),r.handleSettingsUpdate(),r.refresh(),r}return g(t,e),h(t,[{key:"registerNodeProgram",value:function(e,t,i){return this.nodePrograms[e]&&this.nodePrograms[e].kill(),this.nodeHoverPrograms[e]&&this.nodeHoverPrograms[e].kill(),this.nodePrograms[e]=new t(this.webGLContexts.nodes,this.frameBuffers.nodes,this),this.nodeHoverPrograms[e]=new(i||t)(this.webGLContexts.hoverNodes,null,this),this}},{key:"registerEdgeProgram",value:function(e,t){return this.edgePrograms[e]&&this.edgePrograms[e].kill(),this.edgePrograms[e]=new t(this.webGLContexts.edges,this.frameBuffers.edges,this),this}},{key:"unregisterNodeProgram",value:function(e){if(this.nodePrograms[e]){var t=this.nodePrograms,i=t[e],n=eX(t,[e].map(a));i.kill(),this.nodePrograms=n}if(this.nodeHoverPrograms[e]){var r=this.nodeHoverPrograms,o=r[e],s=eX(r,[e].map(a));o.kill(),this.nodePrograms=s}return this}},{key:"unregisterEdgeProgram",value:function(e){if(this.edgePrograms[e]){var t=this.edgePrograms,i=t[e],n=eX(t,[e].map(a));i.kill(),this.edgePrograms=n}return this}},{key:"resetWebGLTexture",value:function(e){var t=this.webGLContexts[e],i=this.frameBuffers[e],n=this.textures[e];n&&t.deleteTexture(n);var r=t.createTexture();return t.bindFramebuffer(t.FRAMEBUFFER,i),t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,null),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0),this.textures[e]=r,this}},{key:"bindCameraHandlers",value:function(){var e=this;return this.activeListeners.camera=function(){e.scheduleRender()},this.camera.on("updated",this.activeListeners.camera),this}},{key:"unbindCameraHandlers",value:function(){return this.camera.removeListener("updated",this.activeListeners.camera),this}},{key:"getNodeAtPosition",value:function(e){var t=e.x,i=e.y,n=_(this.webGLContexts.nodes,this.frameBuffers.nodes,t,i,this.pixelRatio,this.pickingDownSizingRatio),r=L.apply(void 0,eY(n)),a=this.itemIDsIndex[r];return a&&"node"===a.type?a.id:null}},{key:"bindEventHandlers",value:function(){var e=this;this.activeListeners.handleResize=function(){e.scheduleRefresh()},window.addEventListener("resize",this.activeListeners.handleResize),this.activeListeners.handleMove=function(t){var i=eO(t),n={event:i,preventSigmaDefault:function(){i.preventSigmaDefault()}},r=e.getNodeAtPosition(i);if(r&&e.hoveredNode!==r&&!e.nodeDataCache[r].hidden){e.hoveredNode&&e.emit("leaveNode",D(D({},n),{},{node:e.hoveredNode})),e.hoveredNode=r,e.emit("enterNode",D(D({},n),{},{node:r})),e.scheduleHighlightedNodesRender();return}if(e.hoveredNode&&e.getNodeAtPosition(i)!==e.hoveredNode){var a=e.hoveredNode;e.hoveredNode=null,e.emit("leaveNode",D(D({},n),{},{node:a})),e.scheduleHighlightedNodesRender();return}if(e.settings.enableEdgeEvents){var o=e.hoveredNode?null:e.getEdgeAtPoint(n.event.x,n.event.y);o!==e.hoveredEdge&&(e.hoveredEdge&&e.emit("leaveEdge",D(D({},n),{},{edge:e.hoveredEdge})),o&&e.emit("enterEdge",D(D({},n),{},{edge:o})),e.hoveredEdge=o)}},this.activeListeners.handleMoveBody=function(t){var i=eO(t);e.emit("moveBody",{event:i,preventSigmaDefault:function(){i.preventSigmaDefault()}})},this.activeListeners.handleLeave=function(t){var i=eO(t),n={event:i,preventSigmaDefault:function(){i.preventSigmaDefault()}};e.hoveredNode&&(e.emit("leaveNode",D(D({},n),{},{node:e.hoveredNode})),e.scheduleHighlightedNodesRender()),e.settings.enableEdgeEvents&&e.hoveredEdge&&(e.emit("leaveEdge",D(D({},n),{},{edge:e.hoveredEdge})),e.scheduleHighlightedNodesRender()),e.emit("leaveStage",D({},n))},this.activeListeners.handleEnter=function(t){var i=eO(t);e.emit("enterStage",D({},{event:i,preventSigmaDefault:function(){i.preventSigmaDefault()}}))};var t=function(t){return function(i){var n=eO(i),r={event:n,preventSigmaDefault:function(){n.preventSigmaDefault()}},a=e.getNodeAtPosition(n);if(a)return e.emit("".concat(t,"Node"),D(D({},r),{},{node:a}));if(e.settings.enableEdgeEvents){var o=e.getEdgeAtPoint(n.x,n.y);if(o)return e.emit("".concat(t,"Edge"),D(D({},r),{},{edge:o}))}return e.emit("".concat(t,"Stage"),r)}};return this.activeListeners.handleClick=t("click"),this.activeListeners.handleRightClick=t("rightClick"),this.activeListeners.handleDoubleClick=t("doubleClick"),this.activeListeners.handleWheel=t("wheel"),this.activeListeners.handleDown=t("down"),this.activeListeners.handleUp=t("up"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("mousemovebody",this.activeListeners.handleMoveBody),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("wheel",this.activeListeners.handleWheel),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this.mouseCaptor.on("mouseup",this.activeListeners.handleUp),this.mouseCaptor.on("mouseleave",this.activeListeners.handleLeave),this.mouseCaptor.on("mouseenter",this.activeListeners.handleEnter),this.touchCaptor.on("touchdown",this.activeListeners.handleDown),this.touchCaptor.on("touchdown",this.activeListeners.handleMove),this.touchCaptor.on("touchup",this.activeListeners.handleUp),this.touchCaptor.on("touchmove",this.activeListeners.handleMove),this.touchCaptor.on("tap",this.activeListeners.handleClick),this.touchCaptor.on("doubletap",this.activeListeners.handleDoubleClick),this.touchCaptor.on("touchmove",this.activeListeners.handleMoveBody),this}},{key:"bindGraphHandlers",value:function(){var e=this,t=this.graph,i=new Set(["x","y","zIndex","type"]);return this.activeListeners.eachNodeAttributesUpdatedGraphUpdate=function(n){var r,a=null==(r=n.hints)?void 0:r.attributes;e.graph.forEachNode(function(t){return e.updateNode(t)});var o=!a||a.some(function(e){return i.has(e)});e.refresh({partialGraph:{nodes:t.nodes()},skipIndexation:!o,schedule:!0})},this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate=function(i){var n,r=null==(n=i.hints)?void 0:n.attributes;e.graph.forEachEdge(function(t){return e.updateEdge(t)});var a=r&&["zIndex","type"].some(function(e){return null==r?void 0:r.includes(e)});e.refresh({partialGraph:{edges:t.edges()},skipIndexation:!a,schedule:!0})},this.activeListeners.addNodeGraphUpdate=function(t){var i=t.key;e.addNode(i),e.refresh({partialGraph:{nodes:[i]},skipIndexation:!1,schedule:!0})},this.activeListeners.updateNodeGraphUpdate=function(t){var i=t.key;e.refresh({partialGraph:{nodes:[i]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropNodeGraphUpdate=function(t){var i=t.key;e.removeNode(i),e.refresh({schedule:!0})},this.activeListeners.addEdgeGraphUpdate=function(t){var i=t.key;e.addEdge(i),e.refresh({partialGraph:{edges:[i]},schedule:!0})},this.activeListeners.updateEdgeGraphUpdate=function(t){var i=t.key;e.refresh({partialGraph:{edges:[i]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropEdgeGraphUpdate=function(t){var i=t.key;e.removeEdge(i),e.refresh({schedule:!0})},this.activeListeners.clearEdgesGraphUpdate=function(){e.clearEdgeState(),e.clearEdgeIndices(),e.refresh({schedule:!0})},this.activeListeners.clearGraphUpdate=function(){e.clearEdgeState(),e.clearNodeState(),e.clearEdgeIndices(),e.clearNodeIndices(),e.refresh({schedule:!0})},t.on("nodeAdded",this.activeListeners.addNodeGraphUpdate),t.on("nodeDropped",this.activeListeners.dropNodeGraphUpdate),t.on("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),t.on("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),t.on("edgeAdded",this.activeListeners.addEdgeGraphUpdate),t.on("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),t.on("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),t.on("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),t.on("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),t.on("cleared",this.activeListeners.clearGraphUpdate),this}},{key:"unbindGraphHandlers",value:function(){var e=this.graph;e.removeListener("nodeAdded",this.activeListeners.addNodeGraphUpdate),e.removeListener("nodeDropped",this.activeListeners.dropNodeGraphUpdate),e.removeListener("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),e.removeListener("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),e.removeListener("edgeAdded",this.activeListeners.addEdgeGraphUpdate),e.removeListener("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),e.removeListener("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),e.removeListener("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),e.removeListener("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),e.removeListener("cleared",this.activeListeners.clearGraphUpdate)}},{key:"getEdgeAtPoint",value:function(e,t){var i=_(this.webGLContexts.edges,this.frameBuffers.edges,e,t,this.pixelRatio,this.pickingDownSizingRatio),n=L.apply(void 0,eY(i)),r=this.itemIDsIndex[n];return r&&"edge"===r.type?r.id:null}},{key:"process",value:function(){var e=this;this.emit("beforeProcess");var t=this.graph,i=this.settings,n=this.getDimensions();if(this.nodeExtent=function(e){if(!e.order)return{x:[0,1],y:[0,1]};var t=1/0,i=-1/0,n=1/0,r=-1/0;return e.forEachNode(function(e,a){var o=a.x,s=a.y;o<t&&(t=o),o>i&&(i=o),s<n&&(n=s),s>r&&(r=s)}),{x:[t,i],y:[n,r]}}(this.graph),!this.settings.autoRescale){var r=n.width,a=n.height,o=this.nodeExtent,s=o.x,h=o.y;this.nodeExtent={x:[(s[0]+s[1])/2-r/2,(s[0]+s[1])/2+r/2],y:[(h[0]+h[1])/2-a/2,(h[0]+h[1])/2+a/2]}}this.normalizationFunction=eA(this.customBBox||this.nodeExtent);var l=eC(new eG().getState(),n,this.getGraphDimensions(),this.getStagePadding());this.labelGrid.resizeAndClear(n,i.labelGridCellSize);for(var d={},u={},c={},g={},f=1,m=t.nodes(),v=0,p=m.length;v<p;v++){var y=m[v],b=this.nodeDataCache[y],E=t.getNodeAttributes(y);b.x=E.x,b.y=E.y,this.normalizationFunction.applyTo(b),"string"!=typeof b.label||b.hidden||this.labelGrid.add(y,b.size,this.framedGraphToViewport(b,{matrix:l})),d[b.type]=(d[b.type]||0)+1}for(var x in this.labelGrid.organize(),this.nodePrograms){if(!eJ.call(this.nodePrograms,x))throw Error('Sigma: could not find a suitable program for node type "'.concat(x,'"!'));this.nodePrograms[x].reallocate(d[x]||0),d[x]=0}this.settings.zIndex&&this.nodeZExtent[0]!==this.nodeZExtent[1]&&(m=eS(this.nodeZExtent,function(t){return e.nodeDataCache[t].zIndex},m));for(var w=0,T=m.length;w<T;w++){var k=m[w];u[k]=f,g[u[k]]={type:"node",id:k},f++;var C=this.nodeDataCache[k];this.addNodeToProgram(k,u[k],d[C.type]++)}for(var R={},S=t.edges(),A=0,L=S.length;A<L;A++){var _=S[A],F=this.edgeDataCache[_];R[F.type]=(R[F.type]||0)+1}for(var N in this.settings.zIndex&&this.edgeZExtent[0]!==this.edgeZExtent[1]&&(S=eS(this.edgeZExtent,function(t){return e.edgeDataCache[t].zIndex},S)),this.edgePrograms){if(!eJ.call(this.edgePrograms,N))throw Error('Sigma: could not find a suitable program for edge type "'.concat(N,'"!'));this.edgePrograms[N].reallocate(R[N]||0),R[N]=0}for(var D=0,M=S.length;D<M;D++){var P=S[D];c[P]=f,g[c[P]]={type:"edge",id:P},f++;var G=this.edgeDataCache[P];this.addEdgeToProgram(P,c[P],R[G.type]++)}return this.itemIDsIndex=g,this.nodeIndices=u,this.edgeIndices=c,this.emit("afterProcess"),this}},{key:"handleSettingsUpdate",value:function(e){var t=this,i=this.settings;if(this.camera.minRatio=i.minCameraRatio,this.camera.maxRatio=i.maxCameraRatio,this.camera.enabledZooming=i.enableCameraZooming,this.camera.enabledPanning=i.enableCameraPanning,this.camera.enabledRotation=i.enableCameraRotation,i.cameraPanBoundaries?this.camera.clean=function(e){return t.cleanCameraState(e,i.cameraPanBoundaries&&"object"===eL(i.cameraPanBoundaries)?i.cameraPanBoundaries:{})}:this.camera.clean=null,this.camera.setState(this.camera.validateState(this.camera.getState())),e){if(e.edgeProgramClasses!==i.edgeProgramClasses){for(var n in i.edgeProgramClasses)i.edgeProgramClasses[n]!==e.edgeProgramClasses[n]&&this.registerEdgeProgram(n,i.edgeProgramClasses[n]);for(var r in e.edgeProgramClasses)i.edgeProgramClasses[r]||this.unregisterEdgeProgram(r)}if(e.nodeProgramClasses!==i.nodeProgramClasses||e.nodeHoverProgramClasses!==i.nodeHoverProgramClasses){for(var a in i.nodeProgramClasses)(i.nodeProgramClasses[a]!==e.nodeProgramClasses[a]||i.nodeHoverProgramClasses[a]!==e.nodeHoverProgramClasses[a])&&this.registerNodeProgram(a,i.nodeProgramClasses[a],i.nodeHoverProgramClasses[a]);for(var o in e.nodeProgramClasses)i.nodeProgramClasses[o]||this.unregisterNodeProgram(o)}}return this.mouseCaptor.setSettings(this.settings),this.touchCaptor.setSettings(this.settings),this}},{key:"cleanCameraState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.tolerance,n=void 0===i?0:i,r=t.boundaries,a=D({},e),o=r||this.nodeExtent,s=v(o.x,2),h=s[0],l=s[1],d=v(o.y,2),u=d[0],c=d[1],g=[this.graphToViewport({x:h,y:u},{cameraState:e}),this.graphToViewport({x:l,y:u},{cameraState:e}),this.graphToViewport({x:h,y:c},{cameraState:e}),this.graphToViewport({x:l,y:c},{cameraState:e})],f=1/0,m=-1/0,p=1/0,y=-1/0;g.forEach(function(e){var t=e.x,i=e.y;f=Math.min(f,t),m=Math.max(m,t),p=Math.min(p,i),y=Math.max(y,i)});var b=m-f,E=y-p,x=this.getDimensions(),w=x.width,T=x.height,k=0,C=0;if(b>=w?m<w-n?k=m-(w-n):f>n&&(k=f-n):m>w+n?k=m-(w+n):f<-n&&(k=f+n),E>=T?y<T-n?C=y-(T-n):p>n&&(C=p-n):y>T+n?C=y-(T+n):p<-n&&(C=p+n),k||C){var R=this.viewportToFramedGraph({x:0,y:0},{cameraState:e}),S=this.viewportToFramedGraph({x:k,y:C},{cameraState:e});k=S.x-R.x,C=S.y-R.y,a.x+=k,a.y+=C}return a}},{key:"renderLabels",value:function(){if(!this.settings.renderLabels)return this;var e=this.camera.getState(),t=this.labelGrid.getLabelsToDisplay(e.ratio,this.settings.labelDensity);e_(t,this.nodesWithForcedLabels),this.displayedNodeLabels=new Set;for(var i=this.canvasContexts.labels,n=0,r=t.length;n<r;n++){var a=t[n],o=this.nodeDataCache[a];if(!this.displayedNodeLabels.has(a)&&!o.hidden){var s=this.framedGraphToViewport(o),h=s.x,l=s.y,d=this.scaleSize(o.size);if((o.forceLabel||!(d<this.settings.labelRenderedSizeThreshold))&&!(h<-150)&&!(h>this.width+150)&&!(l<-50)&&!(l>this.height+50)){this.displayedNodeLabels.add(a);var u=this.settings.defaultDrawNodeLabel,c=this.nodePrograms[o.type];((null==c?void 0:c.drawLabel)||u)(i,D(D({key:a},o),{},{size:d,x:h,y:l}),this.settings)}}}return this}},{key:"renderEdgeLabels",value:function(){if(!this.settings.renderEdgeLabels)return this;var e,t,i,n,r,a,o=this.canvasContexts.edgeLabels;o.clearRect(0,0,this.width,this.height);var s=(t=(e={graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedNodeLabels,highlightedNodes:this.highlightedNodes}).graph,i=e.hoveredNode,n=e.highlightedNodes,r=e.displayedNodeLabels,a=[],t.forEachEdge(function(e,t,o,s){(o===i||s===i||n.has(o)||n.has(s)||r.has(o)&&r.has(s))&&a.push(e)}),a);e_(s,this.edgesWithForcedLabels);for(var h=new Set,l=0,d=s.length;l<d;l++){var u=s[l],c=this.graph.extremities(u),g=this.nodeDataCache[c[0]],f=this.nodeDataCache[c[1]],m=this.edgeDataCache[u];if(!h.has(u)&&!m.hidden&&!g.hidden&&!f.hidden){var v=this.settings.defaultDrawEdgeLabel,p=this.edgePrograms[m.type];((null==p?void 0:p.drawLabel)||v)(o,D(D({key:u},m),{},{size:this.scaleSize(m.size)}),D(D(D({key:c[0]},g),this.framedGraphToViewport(g)),{},{size:this.scaleSize(g.size)}),D(D(D({key:c[1]},f),this.framedGraphToViewport(f)),{},{size:this.scaleSize(f.size)}),this.settings),h.add(u)}}return this.displayedEdgeLabels=h,this}},{key:"renderHighlightedNodes",value:function(){var e=this,t=this.canvasContexts.hovers;t.clearRect(0,0,this.width,this.height);var i=function(i){var n=e.nodeDataCache[i],r=e.framedGraphToViewport(n),a=r.x,o=r.y,s=e.scaleSize(n.size),h=e.settings.defaultDrawNodeHover,l=e.nodePrograms[n.type];((null==l?void 0:l.drawHover)||h)(t,D(D({key:i},n),{},{size:s,x:a,y:o}),e.settings)},n=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&n.push(this.hoveredNode),this.highlightedNodes.forEach(function(t){t!==e.hoveredNode&&n.push(t)}),n.forEach(function(e){return i(e)});var r={};for(var a in n.forEach(function(t){var i=e.nodeDataCache[t].type;r[i]=(r[i]||0)+1}),this.nodeHoverPrograms)this.nodeHoverPrograms[a].reallocate(r[a]||0),r[a]=0;n.forEach(function(t){var i=e.nodeDataCache[t];e.nodeHoverPrograms[i.type].process(0,r[i.type]++,i)}),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT);var o=this.getRenderParams();for(var s in this.nodeHoverPrograms)this.nodeHoverPrograms[s].render(o)}},{key:"scheduleHighlightedNodesRender",value:function(){var e=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=requestAnimationFrame(function(){e.renderHighlightedNodesFrame=null,e.renderHighlightedNodes(),e.renderEdgeLabels()}))}},{key:"render",value:function(){var e,t,i=this;this.emit("beforeRender");var n=function(){return i.emit("afterRender"),i};if(this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.resize(),this.needToProcess&&this.process(),this.needToProcess=!1,this.clear(),this.pickingLayers.forEach(function(e){return i.resetWebGLTexture(e)}),!this.graph.order)return n();var r=this.mouseCaptor,a=this.camera.isAnimated()||r.isMoving||r.draggedEvents||r.currentWheelDirection,o=this.camera.getState(),s=this.getDimensions(),h=this.getGraphDimensions(),l=this.getStagePadding();this.matrix=eC(o,s,h,l),this.invMatrix=eC(o,s,h,l,!0),this.correctionRatio=(e=this.matrix,1/Math.sqrt(Math.pow((t=ek(e,{x:Math.cos(o.angle),y:Math.sin(o.angle)},0)).x,2)+Math.pow(t.y,2))/s.width),this.graphToViewportRatio=this.getGraphToViewportRatio();var d=this.getRenderParams();for(var u in this.nodePrograms)this.nodePrograms[u].render(d);if(!this.settings.hideEdgesOnMove||!a)for(var c in this.edgePrograms)this.edgePrograms[c].render(d);return this.settings.hideLabelsOnMove&&a||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),n()}},{key:"addNode",value:function(e){var t=Object.assign({},this.graph.getNodeAttributes(e));this.settings.nodeReducer&&(t=this.settings.nodeReducer(e,t));var i=function(e,t,i){if(!eJ.call(i,"x")||!eJ.call(i,"y"))throw Error('Sigma: could not find a valid position (x, y) for node "'.concat(t,'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?'));return i.color||(i.color=e.defaultNodeColor),i.label||""===i.label||(i.label=null),void 0!==i.label&&null!==i.label?i.label=""+i.label:i.label=null,i.size||(i.size=2),eJ.call(i,"hidden")||(i.hidden=!1),eJ.call(i,"highlighted")||(i.highlighted=!1),eJ.call(i,"forceLabel")||(i.forceLabel=!1),i.type&&""!==i.type||(i.type=e.defaultNodeType),i.zIndex||(i.zIndex=0),i}(this.settings,e,t);this.nodeDataCache[e]=i,this.nodesWithForcedLabels.delete(e),i.forceLabel&&!i.hidden&&this.nodesWithForcedLabels.add(e),this.highlightedNodes.delete(e),i.highlighted&&!i.hidden&&this.highlightedNodes.add(e),this.settings.zIndex&&(i.zIndex<this.nodeZExtent[0]&&(this.nodeZExtent[0]=i.zIndex),i.zIndex>this.nodeZExtent[1]&&(this.nodeZExtent[1]=i.zIndex))}},{key:"updateNode",value:function(e){this.addNode(e);var t=this.nodeDataCache[e];this.normalizationFunction.applyTo(t)}},{key:"removeNode",value:function(e){delete this.nodeDataCache[e],delete this.nodeProgramIndex[e],this.highlightedNodes.delete(e),this.hoveredNode===e&&(this.hoveredNode=null),this.nodesWithForcedLabels.delete(e)}},{key:"addEdge",value:function(e){var t,i,n=Object.assign({},this.graph.getEdgeAttributes(e));this.settings.edgeReducer&&(n=this.settings.edgeReducer(e,n));var r=(t=this.settings,(i=n).color||(i.color=t.defaultEdgeColor),i.label||(i.label=""),i.size||(i.size=.5),eJ.call(i,"hidden")||(i.hidden=!1),eJ.call(i,"forceLabel")||(i.forceLabel=!1),i.type&&""!==i.type||(i.type=t.defaultEdgeType),i.zIndex||(i.zIndex=0),i);this.edgeDataCache[e]=r,this.edgesWithForcedLabels.delete(e),r.forceLabel&&!r.hidden&&this.edgesWithForcedLabels.add(e),this.settings.zIndex&&(r.zIndex<this.edgeZExtent[0]&&(this.edgeZExtent[0]=r.zIndex),r.zIndex>this.edgeZExtent[1]&&(this.edgeZExtent[1]=r.zIndex))}},{key:"updateEdge",value:function(e){this.addEdge(e)}},{key:"removeEdge",value:function(e){delete this.edgeDataCache[e],delete this.edgeProgramIndex[e],this.hoveredEdge===e&&(this.hoveredEdge=null),this.edgesWithForcedLabels.delete(e)}},{key:"clearNodeIndices",value:function(){this.labelGrid=new e$,this.nodeExtent={x:[0,1],y:[0,1]},this.nodeDataCache={},this.edgeProgramIndex={},this.nodesWithForcedLabels=new Set,this.nodeZExtent=[1/0,-1/0],this.highlightedNodes=new Set}},{key:"clearEdgeIndices",value:function(){this.edgeDataCache={},this.edgeProgramIndex={},this.edgesWithForcedLabels=new Set,this.edgeZExtent=[1/0,-1/0]}},{key:"clearIndices",value:function(){this.clearEdgeIndices(),this.clearNodeIndices()}},{key:"clearNodeState",value:function(){this.displayedNodeLabels=new Set,this.highlightedNodes=new Set,this.hoveredNode=null}},{key:"clearEdgeState",value:function(){this.displayedEdgeLabels=new Set,this.highlightedNodes=new Set,this.hoveredEdge=null}},{key:"clearState",value:function(){this.clearEdgeState(),this.clearNodeState()}},{key:"addNodeToProgram",value:function(e,t,i){var n=this.nodeDataCache[e],r=this.nodePrograms[n.type];if(!r)throw Error('Sigma: could not find a suitable program for node type "'.concat(n.type,'"!'));r.process(t,i,n),this.nodeProgramIndex[e]=i}},{key:"addEdgeToProgram",value:function(e,t,i){var n=this.edgeDataCache[e],r=this.edgePrograms[n.type];if(!r)throw Error('Sigma: could not find a suitable program for edge type "'.concat(n.type,'"!'));var a=this.graph.extremities(e),o=this.nodeDataCache[a[0]],s=this.nodeDataCache[a[1]];r.process(t,i,o,s,n),this.edgeProgramIndex[e]=i}},{key:"getRenderParams",value:function(){return{matrix:this.matrix,invMatrix:this.invMatrix,width:this.width,height:this.height,pixelRatio:this.pixelRatio,zoomRatio:this.camera.ratio,cameraAngle:this.camera.angle,sizeRatio:1/this.scaleSize(),correctionRatio:this.correctionRatio,downSizingRatio:this.pickingDownSizingRatio,minEdgeThickness:this.settings.minEdgeThickness,antiAliasingFeather:this.settings.antiAliasingFeather}}},{key:"getStagePadding",value:function(){var e=this.settings,t=e.stagePadding;return e.autoRescale&&t||0}},{key:"createLayer",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.elements[e])throw Error('Sigma: a layer named "'.concat(e,'" already exists'));var n=function(e,t,i){var n=document.createElement(e);if(t)for(var r in t)n.style[r]=t[r];if(i)for(var a in i)n.setAttribute(a,i[a]);return n}(t,{position:"absolute"},{class:"sigma-".concat(e)});return i.style&&Object.assign(n.style,i.style),this.elements[e]=n,"beforeLayer"in i&&i.beforeLayer?this.elements[i.beforeLayer].before(n):"afterLayer"in i&&i.afterLayer?this.elements[i.afterLayer].after(n):this.container.appendChild(n),n}},{key:"createCanvas",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.createLayer(e,"canvas",t)}},{key:"createCanvasContext",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.createCanvas(e,t);return this.canvasContexts[e]=i.getContext("2d",{preserveDrawingBuffer:!1,antialias:!1}),this}},{key:"createWebGLContext",value:function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(null==i?void 0:i.canvas)||this.createCanvas(e,i);i.hidden&&n.remove();var r=D({preserveDrawingBuffer:!1,antialias:!1},i);(t=n.getContext("webgl2",r))||(t=n.getContext("webgl",r)),t||(t=n.getContext("experimental-webgl",r));var a=t;if(this.webGLContexts[e]=a,a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA),i.picking){this.pickingLayers.add(e);var o=a.createFramebuffer();if(!o)throw Error("Sigma: cannot create a new frame buffer for layer ".concat(e));this.frameBuffers[e]=o}return a}},{key:"killLayer",value:function(e){var t,i=this.elements[e];if(!i)throw Error("Sigma: cannot kill layer ".concat(e,", which does not exist"));return this.webGLContexts[e]?(null==(t=this.webGLContexts[e].getExtension("WEBGL_lose_context"))||t.loseContext(),delete this.webGLContexts[e]):this.canvasContexts[e]&&delete this.canvasContexts[e],i.remove(),delete this.elements[e],this}},{key:"getCamera",value:function(){return this.camera}},{key:"setCamera",value:function(e){this.unbindCameraHandlers(),this.camera=e,this.bindCameraHandlers()}},{key:"getContainer",value:function(){return this.container}},{key:"getGraph",value:function(){return this.graph}},{key:"setGraph",value:function(e){e!==this.graph&&(this.hoveredNode&&!e.hasNode(this.hoveredNode)&&(this.hoveredNode=null),this.hoveredEdge&&!e.hasEdge(this.hoveredEdge)&&(this.hoveredEdge=null),this.unbindGraphHandlers(),null!==this.checkEdgesEventsFrame&&(cancelAnimationFrame(this.checkEdgesEventsFrame),this.checkEdgesEventsFrame=null),this.graph=e,this.bindGraphHandlers(),this.refresh())}},{key:"getMouseCaptor",value:function(){return this.mouseCaptor}},{key:"getTouchCaptor",value:function(){return this.touchCaptor}},{key:"getDimensions",value:function(){return{width:this.width,height:this.height}}},{key:"getGraphDimensions",value:function(){var e=this.customBBox||this.nodeExtent;return{width:e.x[1]-e.x[0]||1,height:e.y[1]-e.y[0]||1}}},{key:"getNodeDisplayData",value:function(e){var t=this.nodeDataCache[e];return t?Object.assign({},t):void 0}},{key:"getEdgeDisplayData",value:function(e){var t=this.edgeDataCache[e];return t?Object.assign({},t):void 0}},{key:"getNodeDisplayedLabels",value:function(){return new Set(this.displayedNodeLabels)}},{key:"getEdgeDisplayedLabels",value:function(){return new Set(this.displayedEdgeLabels)}},{key:"getSettings",value:function(){return D({},this.settings)}},{key:"getSetting",value:function(e){return this.settings[e]}},{key:"setSetting",value:function(e,t){var i=D({},this.settings);return this.settings[e]=t,eP(this.settings),this.handleSettingsUpdate(i),this.scheduleRefresh(),this}},{key:"updateSetting",value:function(e,t){return this.setSetting(e,t(this.settings[e])),this}},{key:"setSettings",value:function(e){var t=D({},this.settings);return this.settings=D(D({},this.settings),e),eP(this.settings),this.handleSettingsUpdate(t),this.scheduleRefresh(),this}},{key:"resize",value:function(e){var t=this.width,i=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.pixelRatio=eR(),0===this.width)if(this.settings.allowInvalidContainer)this.width=1;else throw Error("Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(0===this.height)if(this.settings.allowInvalidContainer)this.height=1;else throw Error("Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(!e&&t===this.width&&i===this.height)return this;for(var n in this.elements){var r=this.elements[n];r.style.width=this.width+"px",r.style.height=this.height+"px"}for(var a in this.canvasContexts)this.elements[a].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[a].setAttribute("height",this.height*this.pixelRatio+"px"),1!==this.pixelRatio&&this.canvasContexts[a].scale(this.pixelRatio,this.pixelRatio);for(var o in this.webGLContexts){this.elements[o].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[o].setAttribute("height",this.height*this.pixelRatio+"px");var s=this.webGLContexts[o];if(s.viewport(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio),this.pickingLayers.has(o)){var h=this.textures[o];h&&s.deleteTexture(h)}}return this.emit("resize"),this}},{key:"clear",value:function(){return this.emit("beforeClear"),this.webGLContexts.nodes.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.nodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.edges.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.edges.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this.emit("afterClear"),this}},{key:"refresh",value:function(e){var t=this,i=(null==e?void 0:e.skipIndexation)!==void 0&&(null==e?void 0:e.skipIndexation),n=(null==e?void 0:e.schedule)!==void 0&&e.schedule,r=!e||!e.partialGraph;if(r)this.clearEdgeIndices(),this.clearNodeIndices(),this.graph.forEachNode(function(e){return t.addNode(e)}),this.graph.forEachEdge(function(e){return t.addEdge(e)});else{for(var a,o,s=(null==(a=e.partialGraph)?void 0:a.nodes)||[],h=0,l=(null==s?void 0:s.length)||0;h<l;h++){var d=s[h];if(this.updateNode(d),i){var u=this.nodeProgramIndex[d];if(void 0===u)throw Error('Sigma: node "'.concat(d,"\" can't be repaint"));this.addNodeToProgram(d,this.nodeIndices[d],u)}}for(var c=(null==e||null==(o=e.partialGraph)?void 0:o.edges)||[],g=0,f=c.length;g<f;g++){var m=c[g];if(this.updateEdge(m),i){var v=this.edgeProgramIndex[m];if(void 0===v)throw Error('Sigma: edge "'.concat(m,"\" can't be repaint"));this.addEdgeToProgram(m,this.edgeIndices[m],v)}}}return(r||!i)&&(this.needToProcess=!0),n?this.scheduleRender():this.render(),this}},{key:"scheduleRender",value:function(){var e=this;return this.renderFrame||(this.renderFrame=requestAnimationFrame(function(){e.render()})),this}},{key:"scheduleRefresh",value:function(e){return this.refresh(D(D({},e),{},{schedule:!0}))}},{key:"getViewportZoomedState",value:function(e,t){var i=this.camera.getState(),n=i.ratio,r=i.angle,a=i.x,o=i.y,s=this.settings,h=s.minCameraRatio,l=s.maxCameraRatio;"number"==typeof l&&(t=Math.min(t,l)),"number"==typeof h&&(t=Math.max(t,h));var d=t/n,u={x:this.width/2,y:this.height/2},c=this.viewportToFramedGraph(e),g=this.viewportToFramedGraph(u);return{angle:r,x:(c.x-g.x)*(1-d)+a,y:(c.y-g.y)*(1-d)+o,ratio:t}}},{key:"viewRectangle",value:function(){var e=this.viewportToFramedGraph({x:0,y:0}),t=this.viewportToFramedGraph({x:this.width,y:0}),i=this.viewportToFramedGraph({x:0,y:this.height});return{x1:e.x,y1:e.y,x2:t.x,y2:t.y,height:t.y-i.y}}},{key:"framedGraphToViewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=!!t.cameraState||!!t.viewportDimensions||!!t.graphDimensions,n=ek(t.matrix?t.matrix:i?eC(t.cameraState||this.camera.getState(),t.viewportDimensions||this.getDimensions(),t.graphDimensions||this.getGraphDimensions(),t.padding||this.getStagePadding()):this.matrix,e);return{x:(1+n.x)*this.width/2,y:(1-n.y)*this.height/2}}},{key:"viewportToFramedGraph",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=!!t.cameraState||!!t.viewportDimensions||!t.graphDimensions,n=ek(t.matrix?t.matrix:i?eC(t.cameraState||this.camera.getState(),t.viewportDimensions||this.getDimensions(),t.graphDimensions||this.getGraphDimensions(),t.padding||this.getStagePadding(),!0):this.invMatrix,{x:e.x/this.width*2-1,y:1-e.y/this.height*2});return isNaN(n.x)&&(n.x=0),isNaN(n.y)&&(n.y=0),n}},{key:"viewportToGraph",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.normalizationFunction.inverse(this.viewportToFramedGraph(e,t))}},{key:"graphToViewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.framedGraphToViewport(this.normalizationFunction(e),t)}},{key:"getGraphToViewportRatio",value:function(){var e={x:0,y:0},t={x:1,y:1},i=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),n=this.graphToViewport(e),r=this.graphToViewport(t);return Math.sqrt(Math.pow(n.x-r.x,2)+Math.pow(n.y-r.y,2))/i}},{key:"getBBox",value:function(){return this.nodeExtent}},{key:"getCustomBBox",value:function(){return this.customBBox}},{key:"setCustomBBox",value:function(e){return this.customBBox=e,this.scheduleRender(),this}},{key:"kill",value:function(){this.emit("kill"),this.removeAllListeners(),this.unbindCameraHandlers(),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),this.unbindGraphHandlers(),this.clearIndices(),this.clearState(),this.nodeDataCache={},this.edgeDataCache={},this.highlightedNodes.clear(),this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&(cancelAnimationFrame(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var e=this.container;e.firstChild;)e.removeChild(e.firstChild);for(var t in this.nodePrograms)this.nodePrograms[t].kill();for(var i in this.nodeHoverPrograms)this.nodeHoverPrograms[i].kill();for(var n in this.edgePrograms)this.edgePrograms[n].kill();for(var r in this.nodePrograms={},this.nodeHoverPrograms={},this.edgePrograms={},this.elements)this.killLayer(r);this.canvasContexts={},this.webGLContexts={},this.elements={}}},{key:"scaleSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.camera.ratio;return e/this.settings.zoomToSizeRatioFunction(t)*("positions"===this.getSetting("itemSizesReference")?t*this.graphToViewportRatio:1)}},{key:"getCanvases",value:function(){var e={};for(var t in this.elements)this.elements[t]instanceof HTMLCanvasElement&&(e[t]=this.elements[t]);return e}}])}(em);let e0=(0,i.createContext)(null),e1=e0.Provider;function e2(){let e=(0,i.useContext)(e0);if(null==e)throw Error("No context provided: useSigmaContext() can only be used in a descendant of <SigmaContainer>");return e}function e3(){return e2().sigma}function e5(){let{sigma:e}=e2();return(0,i.useCallback)(t=>{e&&Object.keys(t).forEach(i=>{e.setSetting(i,t[i])})},[e])}function e6(e){return new Set(Object.keys(e))}let e4=e6({clickNode:!0,rightClickNode:!0,downNode:!0,enterNode:!0,leaveNode:!0,doubleClickNode:!0,wheelNode:!0,clickEdge:!0,rightClickEdge:!0,downEdge:!0,enterEdge:!0,leaveEdge:!0,doubleClickEdge:!0,wheelEdge:!0,clickStage:!0,rightClickStage:!0,downStage:!0,doubleClickStage:!0,wheelStage:!0,beforeRender:!0,afterRender:!0,kill:!0,upStage:!0,upEdge:!0,upNode:!0,enterStage:!0,leaveStage:!0,resize:!0,afterClear:!0,afterProcess:!0,beforeClear:!0,beforeProcess:!0,moveBody:!0}),e8=e6({click:!0,rightClick:!0,doubleClick:!0,mouseup:!0,mousedown:!0,mousemove:!0,mousemovebody:!0,mouseleave:!0,mouseenter:!0,wheel:!0}),e9=e6({touchup:!0,touchdown:!0,touchmove:!0,touchmovebody:!0,tap:!0,doubletap:!0}),e7=e6({updated:!0});function te(e,t){if(e===t)return!0;if("object"==typeof e&&null!=e&&"object"==typeof t&&null!=t){if(Object.keys(e).length!=Object.keys(t).length)return!1;for(let i in e)if(!Object.hasOwn(t,i)||!te(e[i],t[i]))return!1;return!0}return!1}let tt=(0,i.forwardRef)((e,t)=>{let{graph:n,id:a,className:o,style:s,settings:h={},children:l}=e,d=(0,i.useRef)(null),u=(0,i.useRef)(null),[c,g]=(0,i.useState)(null),[f,m]=(0,i.useState)(h);(0,i.useEffect)(()=>{m(e=>te(e,h)?e:h)},[h]),(0,i.useEffect)(()=>{g(e=>{let t=null;if(null!==u.current){let i=new r.default;n&&(i="function"==typeof n?new n:n);let a=null;e&&(a=e.getCamera().getState(),e.kill()),t=new eQ(i,u.current,f),a&&t.getCamera().setState(a)}return t})},[u,n,f]),(0,i.useImperativeHandle)(t,()=>c,[c]);let v=(0,i.useMemo)(()=>c&&d.current?{sigma:c,container:d.current}:null,[c,d]),p=null!==v?i.default.createElement(e1,{value:v},l):null;return i.default.createElement("div",Object.assign({},{className:"react-sigma ".concat(o||""),id:a,style:s},{ref:d}),i.default.createElement("div",{className:"sigma-container",ref:u}),p)});function ti(e,t){let n=e3(),[r,a]=(0,i.useState)(!1),[o,s]=(0,i.useState)(null),h=(0,i.useRef)(t);return te(h.current,t)||(h.current=t),(0,i.useEffect)(()=>{a(!1);let t=null;return h.current&&(t=new e(n.getGraph(),h.current)),s(t),()=>{null!==t&&t.kill()}},[n,h,s,a,e]),{stop:(0,i.useCallback)(()=>{o&&(o.stop(),a(!1))},[o,a]),start:(0,i.useCallback)(()=>{o&&(o.start(),a(!0))},[o,a]),kill:(0,i.useCallback)(()=>{o&&o.kill(),a(!1)},[o,a]),isRunning:r}}e.i(64932);var tn=e.i(42114);e.i(98422);var tr=e.i(14487);e.i(50843);var ta=e.i(68105),to=e.i(39584),ts=e.i(86282);let th=e=>{let{graphData:t,layout:n,isLayoutRunning:r,dragMode:a,draggedNode:o,setDraggedNode:s,dragLockMode:h,forceConfig:l,forceAtlas2Config:d={},noverlapConfig:u={}}=e,{resolvedTheme:c}=(0,to.useTheme)(),g="dark"===c,f=function(){let e=e3();return(0,i.useCallback)(function(t){let i=!(arguments.length>1)||void 0===arguments[1]||arguments[1];e&&t&&(i&&e.getGraph().order>0&&e.getGraph().clear(),e.getGraph().import(t),e.refresh())},[e])}(),m=e5(),v=function(){let e=e3(),t=e5(),[n,r]=(0,i.useState)({});return(0,i.useEffect)(()=>{if(!e||!n)return;let t=Object.keys(n);return t.forEach(t=>{let i=n[t];e4.has(t)&&e.on(t,i),e8.has(t)&&e.getMouseCaptor().on(t,i),e9.has(t)&&e.getTouchCaptor().on(t,i),e7.has(t)&&e.getCamera().on(t,i)}),()=>{e&&t.forEach(t=>{let i=n[t];e4.has(t)&&e.off(t,i),e8.has(t)&&e.getMouseCaptor().off(t,i),e9.has(t)&&e.getTouchCaptor().off(t,i),e7.has(t)&&e.getCamera().off(t,i)})}},[e,n,t]),r}(),p=e3(),y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ti(tn.default,e)}(),b=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ti(tr.default,e)}(),E=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ti(ta.default,e)}();return(0,i.useEffect)(()=>{f(t)},[f,t]),(0,i.useEffect)(()=>{m({allowInvalidContainer:!0,renderLabels:!0,labelSize:12,labelWeight:"bold",labelFont:"system-ui, -apple-system, sans-serif",labelColor:{color:g?ts.palette.dark.foreground:ts.palette.light.foreground},hideLabelsOnMove:!1,labelDensity:1,labelRenderedSizeThreshold:0,defaultNodeColor:g?ts.palette.dark.primary:ts.palette.light.primary,defaultEdgeColor:g?ts.palette.dark.foreground:ts.palette.light.foreground,enableCameraRotation:!o,enableCameraPanning:!o,enableCameraZooming:!o,defaultDrawNodeHover:(e,t,i)=>{let{x:n,y:r,size:a,color:o,label:s}=t,h=g?ts.palette.dark.background:ts.palette.light.background,l=g?ts.palette.dark.foreground:ts.palette.light.foreground,d=g?ts.palette.dark.background:ts.palette.light.background;if(e.save(),e.strokeStyle=h,e.lineWidth=3,e.lineCap="round",e.lineJoin="round",e.beginPath(),e.arc(n,r,a+1.5,0,2*Math.PI),e.stroke(),s){let t=i.labelSize||12,o=i.labelFont||"system-ui, -apple-system, sans-serif",h=i.labelWeight||"bold";e.font="".concat(h," ").concat(t,"px ").concat(o);let u=e.measureText(s).width;e.fillStyle=l,e.fillRect(n+a+2,r-t/2-2,u+4,t+4),e.fillStyle=d,e.textAlign="left",e.textBaseline="middle",e.fillText(s,n+a+4,r)}e.restore()},nodeReducer:(e,t)=>({...t,size:t.highlighted?1.3*t.size:t.size,color:t.highlighted?g?ts.palette.dark.primary:ts.palette.light.primary:t.color||(g?ts.palette.dark.primary:ts.palette.light.primary),highlighted:t.highlighted||!1,borderColor:t.highlighted?g?ts.palette.dark.foreground:ts.palette.light.foreground:t.pinned?ts.palette.dark.destructive:t.fixed?ts.palette.dark.warning:void 0,borderSize:t.highlighted?3:t.pinned||t.fixed?2:0,labelOutlineColor:g?ts.palette.dark.background:ts.palette.light.background,labelOutlineWidth:2}),edgeReducer:(e,t)=>({...t,size:t.weight||1,color:t.highlighted?g?ts.palette.dark.primary:ts.palette.light.primary:g?ts.palette.dark.foreground:ts.palette.light.foreground})}),setTimeout(()=>{p&&p.getCamera().animatedReset({duration:1e3})},1e3)},[m,p,g,o]),(0,i.useEffect)(()=>{if(!r){y.stop(),b.stop(),E.stop();return}switch(n){case"force":y.start();break;case"forceatlas2":b.start();break;case"noverlap":E.start()}return()=>{y.stop(),b.stop(),E.stop()}},[n,r,y,b,E]),(0,i.useEffect)(()=>{(()=>{if(!p||o)return;let e=p.getGraph();(l.nodeScaling||(null==d?void 0:d.nodeScaling)||(null==u?void 0:u.nodeScaling))&&e.forEachNode(t=>{let i=e.getNodeAttributes(t);if(i.scaleFactor&&!i.highlighted){if(l.nodeScaling&&"force"===n){let n=i.baseSize*(1+(l.scalingRatio-1)*i.scaleFactor);e.setNodeAttribute(t,"size",n)}if((null==d?void 0:d.nodeScaling)&&"forceatlas2"===n){let n=i.baseSize*(1+((d.scalingRatio||1)-1)*i.scaleFactor);e.setNodeAttribute(t,"size",n)}if((null==u?void 0:u.nodeScaling)&&"noverlap"===n){let n=i.baseSize*(1+(u.margin||8)/10*i.scaleFactor);e.setNodeAttribute(t,"size",n)}}})})()},[l.nodeScaling,l.scalingRatio,null==d?void 0:d.nodeScaling,null==d?void 0:d.scalingRatio,null==u?void 0:u.nodeScaling,null==u?void 0:u.margin,n,o]),(0,i.useEffect)(()=>{if(!a)return void v({});let e=e=>{let t,i,n=null==e?void 0:e.original;(null==n?void 0:n.touches)&&n.touches.length>0?(t=n.touches[0].clientX,i=n.touches[0].clientY):(null==n?void 0:n.changedTouches)&&n.changedTouches.length>0?(t=n.changedTouches[0].clientX,i=n.changedTouches[0].clientY):"number"==typeof(null==n?void 0:n.clientX)&&"number"==typeof(null==n?void 0:n.clientY)?(t=n.clientX,i=n.clientY):"number"==typeof(null==e?void 0:e.x)&&"number"==typeof(null==e?void 0:e.y)&&(t=e.x,i=e.y);let r=p.getContainer().getBoundingClientRect(),a=(null!=t?t:0)-r.left,o=(null!=i?i:0)-r.top;return p.viewportToGraph({x:a,y:o})};return v({downNode:e=>{s(e.node);let t=p.getGraph();t.setNodeAttribute(e.node,"highlighted",!0),"fixed"===h?t.setNodeAttribute(e.node,"fixed",!0):"pinned"===h&&t.setNodeAttribute(e.node,"pinned",!0),document.body.style.cursor="grabbing",e.preventSigmaDefault()},mousemovebody:t=>{if(!o)return;let i=e(t),n=p.getGraph();n.setNodeAttribute(o,"x",i.x),n.setNodeAttribute(o,"y",i.y),t.preventSigmaDefault(),t.original.preventDefault(),t.original.stopPropagation()},touchmovebody:t=>{if(!o)return;let i=e(t),n=p.getGraph();n.setNodeAttribute(o,"x",i.x),n.setNodeAttribute(o,"y",i.y),t.preventSigmaDefault(),t.original.preventDefault(),t.original.stopPropagation()},mouseup:()=>{if(o){let e=p.getGraph();e.setNodeAttribute(o,"highlighted",!1),"fixed"===h&&e.setNodeAttribute(o,"fixed",!1),s(null),document.body.style.cursor="default"}},mousedown:e=>{p.getCustomBBox()||p.setCustomBBox(p.getBBox()),o&&e.preventSigmaDefault()},enterNode:()=>{o||(document.body.style.cursor="grab")},leaveNode:()=>{o||(document.body.style.cursor="default")},doubleClickNode:e=>{let t=p.getGraph(),i=t.getNodeAttribute(e.node,"pinned")||!1;t.setNodeAttribute(e.node,"pinned",!i)}}),()=>{document.body.style.cursor="default"}},[v,p,o,a,h,s]),(0,i.useEffect)(()=>{if(!a)return;let e=e=>{if(!o||0===e.touches.length)return;let t=e.touches[0],i=p.getContainer().getBoundingClientRect(),n=t.clientX-i.left,r=t.clientY-i.top,a=p.viewportToGraph({x:n,y:r}),s=p.getGraph();s.setNodeAttribute(o,"x",a.x),s.setNodeAttribute(o,"y",a.y),e.preventDefault(),e.stopPropagation()},t=e=>{if(!o)return;let t=p.getGraph();t.setNodeAttribute(o,"highlighted",!1),"fixed"===h&&t.setNodeAttribute(o,"fixed",!1),s(null),document.body.style.cursor="default"};return document.addEventListener("touchmove",e,{passive:!1}),document.addEventListener("touchend",t,{passive:!1}),()=>{document.removeEventListener("touchmove",e),document.removeEventListener("touchend",t)}},[a,o,p,s,h]),null},tl=e=>{let{graphData:n,layout:r,isLayoutRunning:a,dragMode:o,draggedNode:s,setDraggedNode:h,dragLockMode:l,forceConfig:d,forceAtlas2Config:u,noverlapConfig:c,minHeight:g="600px",className:f="h-full w-full relative bg-background",style:m}=e,[v,p]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{p(!0)},[]),v)?(0,t.jsx)("div",{className:f,style:{...m,minHeight:g},children:(0,t.jsx)(tt,{style:{height:"100%",width:"100%"},settings:{allowInvalidContainer:!0},children:(0,t.jsx)(th,{graphData:n,layout:r,isLayoutRunning:a,dragMode:o,draggedNode:s,setDraggedNode:h,dragLockMode:l,forceConfig:d,forceAtlas2Config:u,noverlapConfig:c})})}):(0,t.jsx)("div",{className:f,style:{...m,minHeight:g},children:(0,t.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,t.jsx)("div",{className:"text-foreground",children:"Loading graph..."})})})},td=(0,n.default)(()=>Promise.resolve(tl),{ssr:!1,loading:()=>(0,t.jsx)("div",{className:"h-full w-full relative flex items-center justify-center bg-background",style:{minHeight:"600px"},children:(0,t.jsx)("div",{className:"text-foreground",children:"Loading graph..."})})})},69100,e=>{e.n(e.i(33026))}]);